import{_ as s,c as a,o as n,a as l}from"./app.af73d145.js";const y=JSON.parse('{"title":"\u534E\u7855RT-AX56U V2\u8DEF\u7531\u5668\u5B89\u88C5clash","description":"","frontmatter":{"title":"\u534E\u7855RT-AX56U V2\u8DEF\u7531\u5668\u5B89\u88C5clash","date":"2022-04-30T05:30:00.000Z","excerpt":"\u6682\u65F6\u7528\u4F5C\u4E2A\u4EBA\u7684\u77E5\u8BC6\u6536\u85CF","tags":["ASUS","\u8DEF\u7531\u5668","clash"]},"headers":[{"level":2,"title":"\u5F00\u542FSSH","slug":"\u5F00\u542Fssh","link":"#\u5F00\u542Fssh","children":[]},{"level":2,"title":"\u914D\u7F6E\u542F\u52A8\u548C\u5173\u95ED\u811A\u672C","slug":"\u914D\u7F6E\u542F\u52A8\u548C\u5173\u95ED\u811A\u672C","link":"#\u914D\u7F6E\u542F\u52A8\u548C\u5173\u95ED\u811A\u672C","children":[]},{"level":2,"title":"\u8BBF\u95EE\u63A7\u5236\u754C\u9762","slug":"\u8BBF\u95EE\u63A7\u5236\u754C\u9762","link":"#\u8BBF\u95EE\u63A7\u5236\u754C\u9762","children":[]}],"relativePath":"post/asus-clash.md"}'),p={name:"post/asus-clash.md"},e=l(`<h1 id="\u534E\u7855rt-ax56u-v2\u8DEF\u7531\u5668\u5B89\u88C5clash" tabindex="-1">\u534E\u7855RT-AX56U V2\u8DEF\u7531\u5668\u5B89\u88C5clash <a class="header-anchor" href="#\u534E\u7855rt-ax56u-v2\u8DEF\u7531\u5668\u5B89\u88C5clash" aria-hidden="true">#</a></h1><ol><li><p>\u53C2\u8003\u9879\u76EE\uFF1A<a href="https://github.com/iloahz/asus-router-stock-firmware-clash" target="_blank" rel="noreferrer">iloahz/asus-router-stock-firmware-clash</a></p></li><li><p>clash\u5730\u5740\uFF08armv7\uFF09\uFF1A<a href="https://github.com/Dreamacro/clash" target="_blank" rel="noreferrer">Dreamacro/clash: A rule-based tunnel in Go. (github.com)</a></p></li><li><p>web\u754C\u9762\uFF1A<a href="https://github.com/haishanh/yacd" target="_blank" rel="noreferrer">haishanh/yacd: Yet Another Clash Dashboard (github.com)</a></p></li></ol><h2 id="\u5F00\u542Fssh" tabindex="-1">\u5F00\u542FSSH <a class="header-anchor" href="#\u5F00\u542Fssh" aria-hidden="true">#</a></h2><ol><li><p>\u767B\u5F55\u8DEF\u7531\u5668\u540E\u53F0 &gt; \u7CFB\u7EDF\u7BA1\u7406 &gt; \u7CFB\u7EDF\u8BBE\u7F6E</p></li><li><p>ssh\u547D\u4EE4\u767B\u5F55\u8DEF\u7531\u5668\uFF1A<code>ssh {username}@192.168.50.1</code></p></li></ol><h2 id="\u914D\u7F6E\u542F\u52A8\u548C\u5173\u95ED\u811A\u672C" tabindex="-1">\u914D\u7F6E\u542F\u52A8\u548C\u5173\u95ED\u811A\u672C <a class="header-anchor" href="#\u914D\u7F6E\u542F\u52A8\u548C\u5173\u95ED\u811A\u672C" aria-hidden="true">#</a></h2><ol><li><p><a href="http://start.sh" target="_blank" rel="noreferrer">start.sh</a></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">create_iptables_rules</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;"> /usr/sbin/iptables -L -n -t nat </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep -lq CLASH</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -A PREROUTING -p tcp --dport 22 -j ACCEPT</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -N CLASH</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -A CLASH -p tcp --dport 7890 -j RETURN</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -A CLASH -d 192.168.0.0/16 -j RETURN</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -A CLASH -p tcp -j REDIRECT --to-ports 7892</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -A PREROUTING -j CLASH</span></span>
<span class="line"><span style="color:#A6ACCD;">        /usr/sbin/iptables -t nat -A PREROUTING -p udp -m udp --dport 53 -j DNAT --to-destination 192.168.50.1:1053</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">fi</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">clashdir=/jffs/clash</span></span>
<span class="line"><span style="color:#82AAFF;">start_clash</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    killall clash</span></span>
<span class="line"><span style="color:#A6ACCD;">    nohup </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">clashdir/clash -d </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">clashdir -f </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">clashdir/config.yaml </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> nohup.out </span><span style="color:#89DDFF;">2&gt;&amp;1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">create_iptables_rules</span></span>
<span class="line"><span style="color:#A6ACCD;">start_clash</span></span>
<span class="line"></span></code></pre></div></li><li><p><a href="http://stop.sh" target="_blank" rel="noreferrer">stop.sh</a></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">clear_iptables_rules</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> /usr/sbin/iptables -L -n -t nat </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> grep -lq CLASH</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    /usr/sbin/iptables -t nat -D PREROUTING -p tcp --dport 22 -j ACCEPT</span></span>
<span class="line"><span style="color:#A6ACCD;">    /usr/sbin/iptables -t nat -D PREROUTING -j CLASH</span></span>
<span class="line"><span style="color:#A6ACCD;">    /usr/sbin/iptables -t nat -F CLASH</span></span>
<span class="line"><span style="color:#A6ACCD;">    /usr/sbin/iptables -t nat -X CLASH</span></span>
<span class="line"><span style="color:#A6ACCD;">    /usr/sbin/iptables -t nat -D PREROUTING -p udp -m udp --dport 53 -j DNAT --to-destination 192.168.50.1:1053</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">fi</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">stop_clash</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  killall clash</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">clear_iptables_rules</span></span>
<span class="line"><span style="color:#A6ACCD;">stop_clash</span></span>
<span class="line"></span></code></pre></div></li></ol><h2 id="\u8BBF\u95EE\u63A7\u5236\u754C\u9762" tabindex="-1">\u8BBF\u95EE\u63A7\u5236\u754C\u9762 <a class="header-anchor" href="#\u8BBF\u95EE\u63A7\u5236\u754C\u9762" aria-hidden="true">#</a></h2><ol><li><p>\u6267\u884C<code>sh start.sh</code></p></li><li><p>\u8BBF\u95EE<a href="http://192.168.50.1:9090/ui/#/proxies" target="_blank" rel="noreferrer">192.168.50.1:9090 - yacd</a></p></li></ol>`,8),t=[e];function o(r,c,i,A,h,D){return n(),a("div",null,t)}const d=s(p,[["render",o]]);export{y as __pageData,d as default};
