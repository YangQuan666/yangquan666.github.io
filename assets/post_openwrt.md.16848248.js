import{_ as s,b as a,e as l,p as n}from"./chunks/framework.fb799614.js";const o="/post/openwrt/topology.png",e="/post/openwrt/img_partition.png",p="/post/openwrt/upload_ipk.png",t="/post/openwrt/diskman_edit.png",r="/post/openwrt/diskman_new.png",c="/post/openwrt/partition_enable.png",i="/post/openwrt/argon_enable.png",C="/post/openwrt/openwrt_install_samba.png",d="/post/openwrt/shared_directories.png",y="/post/openwrt/macOS_compatible.png",h="/post/openwrt/windows_samba_enable.png",g="/post/openwrt/windows_samba.png",A="/post/openwrt/mac_finder_samba.png",D="/post/openwrt/iOS_samba_connect.png",m="/post/openwrt/iOS_samba_display.png",u="/post/openwrt/aria_enable.png",b="/post/openwrt/aria2_rpc.png",E="/post/openwrt/aria2_webui.png",_="/post/openwrt/pc_etherwake.png",k="/post/openwrt/pc_etherwake2.png",v="/post/openwrt/pc_etherwake3.png",f="/post/openwrt/wakeup_shortcut.png",x="/post/openwrt/openclash_download.png",q="/post/openwrt/openclash_subscribe_add.png",F="/post/openwrt/openclash_enable.png",w="/post/openwrt/cloudreve_login.png",B="/post/openwrt/cloudreve_aria2.png",U=JSON.parse('{"title":"面向小白的软路由入门指南","description":"","frontmatter":{"title":"面向小白的软路由入门指南","date":"2022-04-30T00:00:00.000Z","excerpt":"OpenWrt是一款开源的路由器操作系统，能够把你们的路由器变成一台强大的网络工具。它的灵活性和可扩展性让用户能够定制路由器的功能，让路由器发挥最大的潜力。","tags":["OpenWrt","软路由","OpenClash","Docker","游戏加速器","samba","aria2"]},"headers":[],"relativePath":"post/openwrt.md","filePath":"post/openwrt.md","lastUpdated":1683098600000}'),S={name:"post/openwrt.md"},P=n('<h1 id="面向小白的软路由入门指南" tabindex="-1">面向小白的软路由入门指南 <a class="header-anchor" href="#面向小白的软路由入门指南" aria-label="Permalink to &quot;面向小白的软路由入门指南&quot;">​</a></h1><blockquote><p>本文演示的软路由型号为友善R4S，其使用ARM v8芯片，相比传统的X86芯片能耗更低，更适合软路由系统</p></blockquote><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><p>类似于计算机有软件和硬件的概念，在路由器领域，我们习惯把常用的可以发射Wi-Fi信号的设备称为“硬路由”，而把没有无线功能，但是运行着路由系统的设备称为“软路由”</p><ul><li>硬路由的特点：无线信号强，稳定性高但硬件昂贵</li><li>软路由的特点：软件丰富，可玩性高，成本较低</li></ul><p>软路由和硬路由不是相互代替的，反而是相辅相成的关系，有条件的家庭可以两者都选购</p><h2 id="网络拓扑图" tabindex="-1">网络拓扑图 <a class="header-anchor" href="#网络拓扑图" aria-label="Permalink to &quot;网络拓扑图&quot;">​</a></h2><blockquote><p>常见的家庭网络拓扑图，可以看到软路由的位置仅次于光猫，在网络拓扑图中具有较高的地位，正因如此，软路由才可以实现一些硬路由没法实现的高级玩法</p></blockquote><p><div><img src="'+o+`" alt="" style="max-height:400px;" loading="lazy"></div></p><h2 id="系统安装" tabindex="-1">系统安装 <a class="header-anchor" href="#系统安装" aria-label="Permalink to &quot;系统安装&quot;">​</a></h2><blockquote><p>OpenWrt 是一款基于 Linux 的开源软路由系统，专为嵌入式设备（如路由器、网关、无线接入点等）设计。它提供丰富的网络功能和插件，支持多种硬件平台，允许用户自定义配置和扩展功能，从而实现灵活、定制化的路由器管理和网络服务。 OpenWrt 提供了一套完整的路由器操作系统，包括了 Linux 内核、网络管理工具、Web 界面、软件包管理器（opkg）等，用户可以通过 SSH 或 Web 界面进行配置和管理。OpenWrt 具有强大的路由和网络功能，如防火墙、端口转发、虚拟专网（VPN）、负载均衡、QoS（服务质量）、无线网络管理等，同时还支持大量的第三方软件包，如 DNS 服务器、VPN 服务器、网络存储（NAS）等，可以根据需要进行安装和配置。</p></blockquote><h3 id="下载镜像" tabindex="-1">下载镜像 <a class="header-anchor" href="#下载镜像" aria-label="Permalink to &quot;下载镜像&quot;">​</a></h3><table><thead><tr><th>镜像地址</th><th>特点</th></tr></thead><tbody><tr><td><a href="https://firmware-selector.openwrt.org" target="_blank" rel="noreferrer">OpenWrt官方镜像</a></td><td>优点：最为纯净，稳定性也最好<br>缺点：默认存储空间只有500M，而且不能扩展</td></tr><tr><td><a href="https://wiki.friendlyelec.com/wiki/index.php/NanoPi_R4S#Download_Image_Files" target="_blank" rel="noreferrer">友善官方镜像</a></td><td>优点：较为稳定，自带docker<br>缺点：系统太过臃肿，自定义性差</td></tr><tr><td>第三方固件，如 <a href="https://supes.top/" target="_blank" rel="noreferrer">supes.top</a></td><td>优点：由kiddin9大佬贴心定制，适合大多数用户<br>缺点：比起官方的稳定性差</td></tr></tbody></table><h4 id="扩容分区大小" tabindex="-1">扩容分区大小 <a class="header-anchor" href="#扩容分区大小" aria-label="Permalink to &quot;扩容分区大小&quot;">​</a></h4><blockquote><p>OpenWrt默认的系统分区只有100M左右，如果你的SD卡空间较大，建议进行扩容</p><p>⚠️以下命令只能在Linux环境下运行</p></blockquote><ol><li>执行下面的命令，对镜像包进行分区扩容<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 解压下载好的镜像包</span></span>
<span class="line"><span style="color:#FFCB6B;">gzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-kdq</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openwrt-22.03.4-rockchip-armv8-friendlyarm_nanopi-r4s-squashfs-sysupgrade.img.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重命名文件</span></span>
<span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openwrt-22.03.4-rockchip-armv8-friendlyarm_nanopi-r4s-squashfs-sysupgrade.img</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">op.img</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#扩容8000M，这里因为我的SD卡总容量为32G，分出8G绰绰有余</span></span>
<span class="line"><span style="color:#FFCB6B;">dd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">if=/dev/zero</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bs=</span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">M</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">count=</span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#C3E88D;">op.img</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#进入分区工具</span></span>
<span class="line"><span style="color:#FFCB6B;">parted</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">op.img</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#查看分区情况</span></span>
<span class="line"><span style="color:#82AAFF;">print</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#扩容分区2</span></span>
<span class="line"><span style="color:#FFCB6B;">resizepart</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span><span style="color:#C3E88D;">%</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#再次查看</span></span>
<span class="line"><span style="color:#82AAFF;">print</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#退出分区工具</span></span>
<span class="line"><span style="color:#FFCB6B;">quit</span></span></code></pre></div></li><li>分区之后的数据类似下图 <div><img src="`+e+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>使用u盘工具刷入镜像包，如: <a href="https://rufus.ie/zh/" target="_blank" rel="noreferrer">Rufus</a>, <a href="https://www.balena.io/etcher" target="_blank" rel="noreferrer">Etcher</a></li></ol><h4 id="磁盘分区" tabindex="-1">磁盘分区 <a class="header-anchor" href="#磁盘分区" aria-label="Permalink to &quot;磁盘分区&quot;">​</a></h4><ol><li>在<a href="https://op.supes.top/packages/aarch64_generic/" target="_blank" rel="noreferrer">kiddin9大佬的仓库</a>里下载<code>luci-app-diskman</code></li><li><strong>System</strong> &gt; <strong>Software</strong> &gt; <strong>Upload Package</strong>，上传<code>luci-app-diskman.ipk</code>安装包 <div><img src="'+p+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>进入 <strong>System</strong> &gt; <strong>Disk Man</strong> &gt; <strong>Edit</strong>,（如页面报错，则需要安装<code>luci-compat</code>） <div><img src="'+t+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>填写分区起始、结束位置（一般默认就行），点击「New」，完成分区新建 <div><img src="'+r+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>格式化分区为<strong>ext4</strong>格式</li><li><strong>System</strong> &gt; <strong>Software</strong>，搜索并下载<code>block-mount</code></li><li>进入 <strong>System</strong> &gt; <strong>Mount Points</strong>，找到新建的分区，然后<strong>Edit</strong> &gt; <strong>Enable</strong> &gt; <strong>Save&amp;Apply</strong><div><img src="'+c+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h2 id="软件安装" tabindex="-1">软件安装 <a class="header-anchor" href="#软件安装" aria-label="Permalink to &quot;软件安装&quot;">​</a></h2><h3 id="argon主题" tabindex="-1">Argon主题 <a class="header-anchor" href="#argon主题" aria-label="Permalink to &quot;Argon主题&quot;">​</a></h3><blockquote><p>OpenWrt下的高颜值主题</p></blockquote><ol><li>依然是在<a href="https://op.supes.top/packages/aarch64_generic/" target="_blank" rel="noreferrer">kiddin9大佬的仓库</a>里搜索下载<code>luci-theme-argon</code></li><li>然后使用同样的方式上传安装包安装即可</li><li><strong>System</strong> &gt; <strong>System</strong> &gt; <strong>Language and Style</strong>，选择Argon主题并保存生效 <div><img src="'+i+`" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h3 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h3><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dockerd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span></span></code></pre></div><h4 id="管理页面" tabindex="-1">管理页面 <a class="header-anchor" href="#管理页面" aria-label="Permalink to &quot;管理页面&quot;">​</a></h4><p><strong>需要打开防火墙转发，Luci &gt; 网络 &gt; 防火墙 &gt; 转发：接受</strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#创建一个卷，来供管理工具存储数据</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">volume</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer_data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#拉取Docker镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer/portainer-ce:linux-arm64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#运行Docker容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8000</span><span style="color:#C3E88D;">:8000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9443</span><span style="color:#C3E88D;">:9443</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--restart=always</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/run/docker.sock:/var/run/docker.sock</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer_data:/data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer/portainer-ce:linux-arm64</span></span></code></pre></div><p>访问地址：<code>https://192.168.1.1:9443</code></p><p>创建用户名和密码</p><h4 id="运行容器" tabindex="-1">运行容器 <a class="header-anchor" href="#运行容器" aria-label="Permalink to &quot;运行容器&quot;">​</a></h4><h5 id="debian" tabindex="-1">Debian <a class="header-anchor" href="#debian" aria-label="Permalink to &quot;Debian&quot;">​</a></h5><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span></code></pre></div><h5 id="mariadb" tabindex="-1">MariaDB <a class="header-anchor" href="#mariadb" aria-label="Permalink to &quot;MariaDB&quot;">​</a></h5><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/my/own/datadir:/var/lib/mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MARIADB_ROOT_PASSWORD=my-secret-pw</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb:latest</span></span></code></pre></div><h5 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-label="Permalink to &quot;Redis&quot;">​</a></h5><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/myredis/conf:/usr/local/etc/redis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">myredis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/etc/redis/redis.conf</span></span></code></pre></div><h3 id="samba" tabindex="-1">Samba <a class="header-anchor" href="#samba" aria-label="Permalink to &quot;Samba&quot;">​</a></h3><blockquote><p>Samba 是一组不同功能程序组成的应用集合，它能让 Linux 服务器实现文件服务器、身份授权和认证、名称解析和打印服务等功能。</p><p>Samba分为服务端和客户端，本次我们打算将软路由上作为文件共享中心，因此需要在软路由上安装Samba的服务端。客户端的话，因为现代的操作系统默认都支持SMB协议，所以只需要稍加配置即可启用</p></blockquote><h4 id="安装-1" tabindex="-1">安装 <a class="header-anchor" href="#安装-1" aria-label="Permalink to &quot;安装&quot;">​</a></h4><p>在 <strong>System</strong> &gt; <strong>Software</strong> 中安装samba的服务端 <code>samba4-server</code> ,以及可视化配置页面 <code>luci-app-samba4</code><div><img src="`+C+`" alt="" style="max-height:400px;" loading="lazy"></div></p><h4 id="添加用户" tabindex="-1">添加用户 <a class="header-anchor" href="#添加用户" aria-label="Permalink to &quot;添加用户&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#安装&#39;useradd&#39;，目的是为了创建用户</span></span>
<span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadow-useradd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#新建一个用户,名字叫&#39;samba&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#为用户samba创建密码，看到&#39;Added user samba.&#39;表示用户成功添加到samba中了</span></span>
<span class="line"><span style="color:#FFCB6B;">smbpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#创建一个文件夹用于samba共享，可以自己随意设置</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/samba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#使用户samba获得文件夹权限</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-R</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba:samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/samba</span></span></code></pre></div><h4 id="软件配置" tabindex="-1">软件配置 <a class="header-anchor" href="#软件配置" aria-label="Permalink to &quot;软件配置&quot;">​</a></h4><ol><li>进入Samba配置页面： <strong>Services</strong> &gt; <strong>Network Shares</strong></li><li>共享目录，注意 <code>Path</code> 一定要选之前创建的，例如我的就是 <code>/opt/samba</code>，其他的可以参照我的截图来 <div><img src="`+d+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>兼容苹果设备访问(建议打开) <div><img src="'+y+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h4 id="其他平台访问方式" tabindex="-1">其他平台访问方式 <a class="header-anchor" href="#其他平台访问方式" aria-label="Permalink to &quot;其他平台访问方式&quot;">​</a></h4><ol><li>Windows <ol><li>在启用或关闭windows功能中打开 <code>SMB 1.0/CIFS 文件共享支持</code> 和 <code>SMB直通</code><div><img src="'+h+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>打开文件夹，访问samba服务地址，例如 <code>smb://192.168.1.1</code>，然后回车</li><li>按照提示输入用户名和密码即可成功连接 <div><img src="'+g+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol></li><li>Mac <ol><li>打开Finder</li><li>按下快捷键 <code>⌘</code> + <code>K</code> 打开连接</li><li>输入samba的服务器地址，例如 <code>smb://192.168.1.1</code>，点击连接</li><li>按照提示输入用户名和密码即可成功连接 <div><img src="'+A+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol></li><li>iPhone/iPad <ol><li>打开文件 -&gt; 浏览，然后点击右上角 更多 -&gt; 连接服务器 <div><img src="'+D+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>输入samba的服务器地址，例如 <code>smb://192.168.1.1</code>，点击连接</li><li>按照提示输入用户名和密码即可成功连接 <div><img src="'+m+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol></li></ol><h3 id="aria2" tabindex="-1">Aria2 <a class="header-anchor" href="#aria2" aria-label="Permalink to &quot;Aria2&quot;">​</a></h3><blockquote><p>Linux 平台下知名的下载工具</p></blockquote><h4 id="安装-2" tabindex="-1">安装 <a class="header-anchor" href="#安装-2" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ol><li>在 <strong>System</strong> &gt; <strong>Software</strong> 中安装 <code>aria2</code>, <code>luci-app-aria2</code>, <code>webui-aria2</code></li><li>安装后在 System &gt; Services &gt; Aria2可找到</li></ol><h4 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h4><ol><li>在 <strong>Basic Options</strong> 中开启Aria服务，并设置下载目录，这里我是下载到samba路径下方便分享 <div><img src="'+u+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>在 RPC Options 生成RPC令牌 <div><img src="'+b+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>返回 Basic Options ，点击上方的“WEBUI-ARIA2”按钮 <ol><li>设置 &gt; 连接设置中填写aria2服务的ip、端口、rpc密钥 <div><img src="'+E+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>保存连接配置</li><li>现在可以试试下载一个url文件或者BT种子</li></ol></li></ol><h3 id="网络唤醒" tabindex="-1">网络唤醒 <a class="header-anchor" href="#网络唤醒" aria-label="Permalink to &quot;网络唤醒&quot;">​</a></h3><blockquote><p>教你如何使用Siri唤醒你的PC电脑</p></blockquote><h4 id="安装-3" tabindex="-1">安装 <a class="header-anchor" href="#安装-3" aria-label="Permalink to &quot;安装&quot;">​</a></h4><p>在 <strong>System</strong> &gt; <strong>Software</strong> 中安装 <code>luci-app-wol</code> (会自动安装<code>etherwake</code>等依赖)</p><h4 id="pc设置" tabindex="-1">PC设置 <a class="header-anchor" href="#pc设置" aria-label="Permalink to &quot;PC设置&quot;">​</a></h4><ol><li>在 Windows 10 中，运行 &gt; ncpa.cpl 打开「网络连接」设置，然后找到当前在使用的有线网卡，右键点击「属性」： <div><img src="'+_+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>然后选择「配置」： <div><img src="'+k+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>在随后弹出的面板中找到「电源管理」，勾选「允许此设备唤醒计算机」以及「只允许幻数据包唤醒计算机」 <div><img src="'+v+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h4 id="主板设置" tabindex="-1">主板设置 <a class="header-anchor" href="#主板设置" aria-label="Permalink to &quot;主板设置&quot;">​</a></h4><p>除此之外，我们可能还需要启用适当的 BIOS 设置才能使用 WoL 功能，具体方法视厂商而定，进入 BIOS 后注意选项附加的说明即可，可以参考的关键词包括：</p><ul><li>Network Stack</li><li>Automatic Power On</li><li>Wake on LAN/WLAN</li><li>Power Management</li><li>Power On by Onboard LAN</li><li>Power On by PCI-E Devices</li></ul><h4 id="测试唤醒" tabindex="-1">测试唤醒 <a class="header-anchor" href="#测试唤醒" aria-label="Permalink to &quot;测试唤醒&quot;">​</a></h4><ol><li><strong>Service</strong> &gt; <strong>Wake On LAN</strong></li><li>选择网口和待唤醒的主机IP，点击「WAKE UP HOST」</li></ol><h4 id="ios" tabindex="-1">iOS <a class="header-anchor" href="#ios" aria-label="Permalink to &quot;iOS&quot;">​</a></h4><ol><li><strong>捷径</strong> &gt; <strong>新建快捷指令</strong> &gt; <strong>添加操作</strong>，选择「通过SSH运行脚本」</li><li>填写脚本代码: <code>etherwake -D ${需要唤醒的MAC地址}</code></li><li>填写ssh连接信息 <div><img src="'+f+`" alt="" style="max-height:400px;" loading="lazy"></div></li><li>之后需要唤醒电脑时：「嘿Siri，唤醒电脑」</li></ol><h3 id="openclash" tabindex="-1"><a href="https://github.com/vernesong/OpenClash" target="_blank" rel="noreferrer">OpenClash</a> <a class="header-anchor" href="#openclash" aria-label="Permalink to &quot;[OpenClash](https://github.com/vernesong/OpenClash)&quot;">​</a></h3><blockquote><p>一个可运行在 OpenWrt 上的 Clash 客户端，兼容 Shadowsocks、ShadowsocksR、Vmess、Trojan、Snell 等协议</p></blockquote><h4 id="安装-4" tabindex="-1">安装 <a class="header-anchor" href="#安装-4" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ol><li>登录路由器后台，比如 <code>ssh root@192.168.1.1</code></li><li>下载安装前依赖：<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#如果是新的nftables</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">coreutils-nohup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dnsmasq-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ipset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ip-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap-bin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby-yaml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-tun</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-inet-diag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-nft-tproxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-compat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#如果是旧的iptables</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">coreutils-nohup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iptables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dnsmasq-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ipset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ip-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iptables-mod-tproxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iptables-mod-extra</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap-bin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby-yaml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-tun</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-inet-diag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-compat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-base</span></span></code></pre></div></li><li>在<a href="https://github.com/vernesong/OpenClash/releases" target="_blank" rel="noreferrer">OpenClash Release页面</a>找到最新版本的ipk安装包，复制连接地址 下载安装包: <code>wget https://github.com/vernesong/OpenClash/releases/download/v0.45.110-beta/luci-app-openclash_0.45.110-beta_all.ipk -O luci-app-openclash.ipk</code></li><li>安装OpenClash: <code>opkg install ./luci-app-openclash.ipk</code></li><li>在 <strong>Services</strong> &gt; <strong>OpenClash</strong> 中即可找到</li></ol><h4 id="配置-1" tabindex="-1">配置 <a class="header-anchor" href="#配置-1" aria-label="Permalink to &quot;配置&quot;">​</a></h4><ol><li>下载clash内核 <ol><li><strong>OpenClash</strong> &gt; <strong>Plugin Setting</strong> &gt; <strong>Version Update</strong></li><li>找到如图位置，点击即可下载最新版clash内核 <div><img src="`+x+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol></li><li>添加clash订阅 <ol><li><strong>OpenClash</strong> &gt; <strong>Config Subscribe</strong> &gt; <strong>ADD</strong><div><img src="'+q+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>在<code>Subscribe Address</code>中填写自己的clash订阅地址并点击<code>COMMIT SETTING</code>保存</li></ol></li><li>点击OpenClash首页左下角“ENABLE OPENCLASH”即可启动</li><li>点击中间的“OPEN PANEL”可以访问clash前端UI面板 <div><img src="'+F+`" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h3 id="cloudreve" tabindex="-1"><a href="https://docs.cloudreve.org/" target="_blank" rel="noreferrer">Cloudreve</a> <a class="header-anchor" href="#cloudreve" aria-label="Permalink to &quot;[Cloudreve](https://docs.cloudreve.org/)&quot;">​</a></h3><blockquote><p>开源的私有云系统，提供类似谷歌云一样的易用界面，支持文件下载、上传、分享等，同时也支持aria2离线下载</p></blockquote><h4 id="安装-5" tabindex="-1">安装 <a class="header-anchor" href="#安装-5" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ol><li>使用terminal登录openwrt后台，比如 <code>ssh root@192.168.1.1</code></li><li>在GitHub的<a href="https://github.com/cloudreve/Cloudreve/releases" target="_blank" rel="noreferrer">release</a>页面找到最新的安装包，使用如下命令进行下载并保存<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/cloudreve/Cloudreve/releases/download/3.7.1/cloudreve_3.7.1_linux_arm64.tar.gz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-O</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cloudreve_3.7.1_linux_arm64.tar.gz</span></span></code></pre></div></li><li>解压到<code>/opt/cloudreve</code>目录下: <code>tar -zxvf cloudreve_3.7.1_linux_arm64.tar.gz -C /opt/cloudreve</code></li><li>赋予执行权限: <code>chmod +x ./cloudreve</code></li><li>启动cloudreve: <code>./cloudreve</code>，命令行日志中可看到初始的管理员密码，<strong>请务必保存！！！</strong></li></ol><h5 id="开机自启动" tabindex="-1">开机自启动 <a class="header-anchor" href="#开机自启动" aria-label="Permalink to &quot;开机自启动&quot;">​</a></h5><ol><li>新增cloudreve启动文件: <code>vim /etc/init.d/cloudreve</code></li><li>填写如下的内容:<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/sh /etc/rc.common</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">START</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">99</span></span>
<span class="line"><span style="color:#A6ACCD;">STOP</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">01</span></span>
<span class="line"><span style="color:#A6ACCD;">USE_PROCD</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 应用名称 </span></span>
<span class="line"><span style="color:#A6ACCD;">NAME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">cloudreve</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 应用路径</span></span>
<span class="line"><span style="color:#A6ACCD;">PROG</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/opt/cloudreve/cloudreve</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">start_service</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_open_instance</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_set_param</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$PROG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 输出日志到系统log中</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_set_param</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_set_param</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stderr</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_close_instance</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li><li>启用服务: <code>/etc/init.d/cloudreve enable</code></li></ol><h4 id="配置离线下载" tabindex="-1">配置离线下载 <a class="header-anchor" href="#配置离线下载" aria-label="Permalink to &quot;配置离线下载&quot;">​</a></h4><ol><li>浏览器访问<code>192.168.1.1:5212</code>，使用admin账号登录 <div><img src="`+w+'" alt="" style="max-height:400px;" loading="lazy"></div></li><li>登录后点右上角<strong>头像</strong> &gt; <strong>管理面板</strong> &gt; <strong>离线下载节点</strong>，修改主节点</li><li>在离线下载部分填写Aria2对应的信息，保存后即可使用离线下载功能 <div><img src="'+B+'" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h2 id="参考文章" tabindex="-1">参考文章 <a class="header-anchor" href="#参考文章" aria-label="Permalink to &quot;参考文章&quot;">​</a></h2><ul><li><a href="https://opclash.com/luyou/16.html" target="_blank" rel="noreferrer">彧繎博客</a></li><li><a href="https://github.com/vernesong/OpenClash/wiki" target="_blank" rel="noreferrer">OpenClash-使用手册</a></li><li><a href="https://sspai.com/post/67037" target="_blank" rel="noreferrer">嘿 Siri，唤醒电脑</a></li></ul>',82),O=[P];function z(N,W,R,M,T,L){return a(),l("div",null,O)}const V=s(S,[["render",z]]);export{U as __pageData,V as default};
