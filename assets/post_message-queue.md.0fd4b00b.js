import{_ as i,c as r,b as e,e as d,d as t,a,r as c,o as n}from"./app.1f6db2cb.js";const ke=JSON.parse('{"title":"ä½ çœŸçš„äº†è§£æ¶ˆæ¯é˜Ÿåˆ—å—","description":"","frontmatter":{"title":"ä½ çœŸçš„äº†è§£æ¶ˆæ¯é˜Ÿåˆ—å—","date":"2022-11-11T00:00:00.000Z","excerpt":"ä¸€ç¯‡æ–‡ç« å¸¦ä½ æ¢å¯»æ¶ˆæ¯é˜Ÿåˆ—çš„å‡ ä¸ªåŸºç¡€åŠŸèƒ½çš„åŸç†","tags":["mq","æ¶ˆæ¯é˜Ÿåˆ—","kafka","time wheel"]},"headers":[{"level":2,"title":"ä»‹ç»","slug":"ä»‹ç»","link":"#ä»‹ç»","children":[]},{"level":2,"title":"æœ¯è¯­","slug":"æœ¯è¯­","link":"#æœ¯è¯­","children":[{"level":3,"title":"åŸºç¡€","slug":"åŸºç¡€","link":"#åŸºç¡€","children":[]},{"level":3,"title":"æ¶ˆæ¯ç±»å‹","slug":"æ¶ˆæ¯ç±»å‹","link":"#æ¶ˆæ¯ç±»å‹","children":[]},{"level":3,"title":"å…¶ä»–","slug":"å…¶ä»–","link":"#å…¶ä»–","children":[]}]},{"level":2,"title":"æ¶ˆè´¹æ¨¡å¼","slug":"æ¶ˆè´¹æ¨¡å¼","link":"#æ¶ˆè´¹æ¨¡å¼","children":[{"level":3,"title":"æ¨æ¨¡å¼ï¼ˆpushï¼‰","slug":"æ¨æ¨¡å¼-push","link":"#æ¨æ¨¡å¼-push","children":[]},{"level":3,"title":"æ‹‰æ¨¡å¼ï¼ˆpullï¼‰","slug":"æ‹‰æ¨¡å¼-pull","link":"#æ‹‰æ¨¡å¼-pull","children":[]}]},{"level":2,"title":"å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½","slug":"å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½","link":"#å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½","children":[]},{"level":2,"title":"æŠ•é€’&æ¶ˆè´¹è¯­ä¹‰","slug":"æŠ•é€’-æ¶ˆè´¹è¯­ä¹‰","link":"#æŠ•é€’-æ¶ˆè´¹è¯­ä¹‰","children":[{"level":3,"title":"æŠ•é€’è¯­ä¹‰","slug":"æŠ•é€’è¯­ä¹‰","link":"#æŠ•é€’è¯­ä¹‰","children":[]},{"level":3,"title":"æ¶ˆè´¹è¯­ä¹‰","slug":"æ¶ˆè´¹è¯­ä¹‰","link":"#æ¶ˆè´¹è¯­ä¹‰","children":[]}]},{"level":2,"title":"åŠŸèƒ½ç‰¹æ€§","slug":"åŠŸèƒ½ç‰¹æ€§","link":"#åŠŸèƒ½ç‰¹æ€§","children":[{"level":3,"title":"äº‹åŠ¡æ¶ˆæ¯","slug":"äº‹åŠ¡æ¶ˆæ¯","link":"#äº‹åŠ¡æ¶ˆæ¯","children":[]},{"level":3,"title":"å»¶è¿Ÿæ¶ˆæ¯","slug":"å»¶è¿Ÿæ¶ˆæ¯","link":"#å»¶è¿Ÿæ¶ˆæ¯","children":[]},{"level":3,"title":"é¡ºåºæ¶ˆæ¯","slug":"é¡ºåºæ¶ˆæ¯","link":"#é¡ºåºæ¶ˆæ¯","children":[]},{"level":3,"title":"æ¶ˆæ¯è½¨è¿¹","slug":"æ¶ˆæ¯è½¨è¿¹","link":"#æ¶ˆæ¯è½¨è¿¹","children":[]}]},{"level":2,"title":"ç¨³å®šæ€§&æ€§èƒ½","slug":"ç¨³å®šæ€§-æ€§èƒ½","link":"#ç¨³å®šæ€§-æ€§èƒ½","children":[]},{"level":2,"title":"æ€»ç»“","slug":"æ€»ç»“","link":"#æ€»ç»“","children":[]},{"level":2,"title":"å‚è€ƒæ–‡æ¡£","slug":"å‚è€ƒæ–‡æ¡£","link":"#å‚è€ƒæ–‡æ¡£","children":[]}],"relativePath":"post/message-queue.md","lastUpdated":1673449434000}'),l={name:"post/message-queue.md"},s=e("h1",{id:"ä½ çœŸçš„äº†è§£æ¶ˆæ¯é˜Ÿåˆ—å—",tabindex:"-1"},[t("ä½ çœŸçš„äº†è§£æ¶ˆæ¯é˜Ÿåˆ—å— "),e("a",{class:"header-anchor",href:"#ä½ çœŸçš„äº†è§£æ¶ˆæ¯é˜Ÿåˆ—å—","aria-hidden":"true"},"#")],-1),h=a('<h2 id="ä»‹ç»" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»" aria-hidden="true">#</a></h2><p>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessage Queueï¼‰ï¼Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡è¦çš„ç»„ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©ä¸šåŠ¡ç³»ç»Ÿè§£æ„æå‡å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚</p><p>æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š <strong>å¼‚æ­¥</strong>ï¼Œ<strong>è§£è€¦</strong>ï¼Œ<strong>å‰Šå³°å¡«è°·</strong>ï¼ˆè“„æ´ªï¼‰ã€‚</p><p>ä¸æ­¤åŒæ—¶æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿå¯èƒ½å¸¦æ¥å¦‚ä¸‹çš„é—®é¢˜ï¼š <strong>æ•°æ®ä¸¢å¤±</strong>ï¼Œ<strong>æ•°æ®é‡å¤</strong>ï¼Œ<strong>è¿ç»´æˆæœ¬å¢åŠ </strong></p><h2 id="æœ¯è¯­" tabindex="-1">æœ¯è¯­ <a class="header-anchor" href="#æœ¯è¯­" aria-hidden="true">#</a></h2><h3 id="åŸºç¡€" tabindex="-1">åŸºç¡€ <a class="header-anchor" href="#åŸºç¡€" aria-hidden="true">#</a></h3><table><thead><tr><th><strong>ä¸­æ–‡</strong></th><th><strong>è‹±æ–‡</strong></th><th><strong>é‡Šä¹‰</strong></th></tr></thead><tbody><tr><td>æ¶ˆæ¯</td><td>Message</td><td>æ¶ˆæ¯ç³»ç»Ÿä¸­ä¿¡æ¯ä¼ é€’çš„è½½ä½“</td></tr><tr><td>æ¶ˆæ¯ä¸»é¢˜</td><td>Topic</td><td>æ¶ˆæ¯ä¸»é¢˜ï¼Œä¸€çº§æ¶ˆæ¯ç±»å‹ï¼Œé€šè¿‡ Topic å¯¹æ¶ˆæ¯è¿›è¡Œåˆ†ç±»</td></tr><tr><td>æ¶ˆæ¯æ ‡ç­¾</td><td>Tag</td><td>åŸºäºTopicä¸‹æ›´ç»†ç»´åº¦çš„åŒºåˆ†</td></tr><tr><td>åˆ†åŒº</td><td>Queue / Partition</td><td>æ¯ä¸ª Topic ä¸‹ä¼šç”±ä¸€åˆ°å¤šä¸ªé˜Ÿåˆ—æ¥å­˜å‚¨æ¶ˆæ¯</td></tr><tr><td>æ¶ˆæ¯ç”Ÿäº§è€…</td><td>Producer</td><td>è´Ÿè´£ç”Ÿäº§å¹¶å‘é€æ¶ˆæ¯</td></tr><tr><td>æ¶ˆæ¯æ¶ˆè´¹è€…</td><td>Consumer</td><td>è´Ÿè´£æ¶ˆæ¯çš„æ¶ˆè´¹</td></tr><tr><td>æ¶ˆè´¹è€…åˆ†ç»„</td><td>ConsumerGroup</td><td>ç”±ä¸€ç±»Consumerç»„æˆï¼Œå…±åŒæ¶ˆè´¹åŒä¸€ä¸ªTopicçš„æ¶ˆæ¯</td></tr><tr><td>è®¢é˜…å…³ç³»</td><td>Subscription</td><td>è®¢é˜…å…³ç³»ï¼Œè¡¨ç¤ºConsumerå’ŒTopicçš„æ˜ å°„å…³ç³»ï¼Œæ˜¯æ¶ˆæ¯ä¸­å¿ƒæŠ•é€’æ¶ˆæ¯ç»™ä¸‹æ¸¸æ¶ˆè´¹æ–¹çš„å”¯ä¸€ä¾æ®</td></tr></tbody></table><h3 id="æ¶ˆæ¯ç±»å‹" tabindex="-1">æ¶ˆæ¯ç±»å‹ <a class="header-anchor" href="#æ¶ˆæ¯ç±»å‹" aria-hidden="true">#</a></h3><table><thead><tr><th>ä¸­æ–‡</th><th>è‹±æ–‡</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>å®šæ—¶æ¶ˆæ¯</td><td>Timer message</td><td>Producer å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç«¯ï¼Œä½†å¹¶ä¸æœŸæœ›è¿™æ¡æ¶ˆæ¯ç«‹é©¬æŠ•é€’ï¼Œè€Œæ˜¯æ¨è¿Ÿåˆ°åœ¨å½“å‰æ—¶é—´ç‚¹ä¹‹åçš„æŸä¸€ä¸ªæ—¶é—´æŠ•é€’åˆ° Consumer è¿›è¡Œæ¶ˆè´¹ï¼Œè¯¥æ¶ˆæ¯å³å®šæ—¶æ¶ˆæ¯ã€‚</td></tr><tr><td>å»¶æ—¶æ¶ˆæ¯</td><td>Delayed message</td><td>Producer å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç«¯ï¼Œä½†å¹¶ä¸æœŸæœ›è¿™æ¡æ¶ˆæ¯ç«‹é©¬æŠ•é€’ï¼Œè€Œæ˜¯å»¶è¿Ÿä¸€å®šæ—¶é—´åæ‰æŠ•é€’åˆ° Consumer è¿›è¡Œæ¶ˆè´¹ï¼Œè¯¥æ¶ˆæ¯å³å»¶æ—¶æ¶ˆæ¯ã€‚</td></tr><tr><td>äº‹åŠ¡æ¶ˆæ¯</td><td>Transactional message</td><td>æ¶ˆæ¯é˜Ÿåˆ—æä¾›ç±»ä¼¼ X/Open XA çš„åˆ†å¸ƒäº‹åŠ¡åŠŸèƒ½ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„äº‹åŠ¡æ¶ˆæ¯èƒ½è¾¾åˆ°åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´ã€‚</td></tr><tr><td>é¡ºåºæ¶ˆæ¯</td><td>Ordered message</td><td>æ¶ˆæ¯é˜Ÿåˆ—æä¾›çš„ä¸€ç§æŒ‰ç…§é¡ºåºè¿›è¡Œå‘å¸ƒå’Œæ¶ˆè´¹çš„æ¶ˆæ¯ç±»å‹ï¼Œåˆ†ä¸ºå…¨å±€é¡ºåºæ¶ˆæ¯å’Œåˆ†åŒºé¡ºåºæ¶ˆæ¯ï¼Œå½“å‰ä»…æ”¯æŒåˆ†åŒºé¡ºåºæ¶ˆæ¯ã€‚</td></tr></tbody></table><h3 id="å…¶ä»–" tabindex="-1">å…¶ä»– <a class="header-anchor" href="#å…¶ä»–" aria-hidden="true">#</a></h3><table><thead><tr><th>ä¸­æ–‡</th><th>è‹±æ–‡</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>æ¶ˆæ¯å †ç§¯</td><td>Message accumulation</td><td>Producer å·²ç»å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æœåŠ¡ç«¯ï¼Œä½†ç”±äº Consumer æ¶ˆè´¹èƒ½åŠ›æœ‰é™ï¼Œæœªèƒ½åœ¨çŸ­æ—¶é—´å†…å°†æ‰€æœ‰æ¶ˆæ¯æ­£ç¡®æ¶ˆè´¹æ‰ï¼Œæ­¤æ—¶åœ¨æ¶ˆæ¯é˜Ÿåˆ—çš„æœåŠ¡ç«¯ä¿å­˜ç€æœªè¢«æ¶ˆè´¹çš„æ¶ˆæ¯ï¼Œè¯¥çŠ¶æ€å³æ¶ˆæ¯å †ç§¯ ã€‚</td></tr><tr><td>æ¶ˆæ¯è½¨è¿¹</td><td>Message trace</td><td>åœ¨ä¸€æ¡æ¶ˆæ¯ä» Producer å‘å‡ºåˆ° Consumer æ¶ˆè´¹å¤„ç†è¿‡ç¨‹ä¸­ï¼Œç”±å„ä¸ªç›¸å…³èŠ‚ç‚¹çš„æ—¶é—´ã€åœ°ç‚¹ç­‰æ•°æ®æ±‡èšè€Œæˆçš„å®Œæ•´é“¾è·¯ä¿¡æ¯ã€‚</td></tr><tr><td>é‡ç½®æ¶ˆè´¹ä½ç‚¹</td><td>Reset consumption offset</td><td>ä»¥æ—¶é—´è½´ä¸ºåæ ‡ï¼Œåœ¨æ¶ˆæ¯æŒä¹…åŒ–å­˜å‚¨çš„æ—¶é—´èŒƒå›´å†…ï¼Œé‡æ–°è®¾ç½® Consumer å¯¹å·²è®¢é˜…çš„ Topic çš„æ¶ˆè´¹è¿›åº¦ï¼Œè®¾ç½®å®Œæˆå Consumer å°†æ¥æ”¶è®¾å®šæ—¶é—´ç‚¹ä¹‹åç”± Producer å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç«¯çš„æ¶ˆæ¯ã€‚</td></tr></tbody></table><h2 id="æ¶ˆè´¹æ¨¡å¼" tabindex="-1">æ¶ˆè´¹æ¨¡å¼ <a class="header-anchor" href="#æ¶ˆè´¹æ¨¡å¼" aria-hidden="true">#</a></h2>',12),p=a('<h3 id="æ¨æ¨¡å¼-push" tabindex="-1">æ¨æ¨¡å¼ï¼ˆpushï¼‰ <a class="header-anchor" href="#æ¨æ¨¡å¼-push" aria-hidden="true">#</a></h3><p><strong>è§£é‡Š</strong>ï¼šå½“ Producer å‘å‡ºçš„æ¶ˆæ¯åˆ°è¾¾åï¼ŒæœåŠ¡ç«¯é©¬ä¸Šå°†è¿™æ¡æ¶ˆæ¯æŠ•é€’ç»™ Consumer</p><p><strong>é€‚ç”¨åœºæ™¯</strong></p><ol><li><strong>æ¶ˆæ¯å®æ—¶æ€§è¦æ±‚è¾ƒé«˜</strong>ï¼šé‡‡ç”¨æ¨æ¨¡å¼ï¼Œæ¶ˆæ¯ä¸€åˆ°brokerå°±ä¼šç«‹åˆ»å‘é€ç»™ Consumerï¼Œè€Œæ‹‰æ¨¡å¼åˆ™éœ€è¦æ¶ˆè´¹è€…ä¸»åŠ¨å»è½®è®­ï¼Œéœ€è¦è‡ªå·±æ§åˆ¶æ—¶é—´é—´éš”</li><li><strong>å®ç°ç®€å•</strong>ï¼šæ¶ˆè´¹è€…ä½¿ç”¨æ¥è¯´æ›´ç®€å•ï¼Œå°±ç­‰ç€ï¼Œåæ­£æœ‰æ¶ˆæ¯æ¥äº†å°±ä¼šæ¨è¿‡æ¥</li></ol><h3 id="æ‹‰æ¨¡å¼-pull" tabindex="-1">æ‹‰æ¨¡å¼ï¼ˆpullï¼‰ <a class="header-anchor" href="#æ‹‰æ¨¡å¼-pull" aria-hidden="true">#</a></h3><p><strong>è§£é‡Š</strong>ï¼šå½“æœåŠ¡ç«¯æ”¶åˆ°è¿™æ¡æ¶ˆæ¯åä»€ä¹ˆä¹Ÿä¸åšï¼Œåªæ˜¯ç­‰ç€ Consumer ä¸»åŠ¨åˆ°è‡ªå·±è¿™é‡Œæ¥è¯»ï¼Œå³ Consumer è¿™é‡Œæœ‰ä¸€ä¸ª&quot;æ‹‰å–&quot;çš„åŠ¨ä½œ</p><p><strong>é€‚ç”¨åœºæ™¯</strong></p><ol><li><strong>æ¶ˆè´¹é€Ÿç‡å¯æ§</strong>ï¼šé‡‡ç”¨æ‹‰æ¨¡å¼ï¼Œæ¶ˆè´¹è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„æ¶ˆè´¹é€Ÿç‡ï¼ŒåŠ¨æ€çš„è°ƒæ•´æ‹‰å–çš„é¢‘ç‡ï¼Œå¾ˆéš¾å‡ºç°æ¶ˆæ¯ç§¯å‹</li><li><strong>éƒ¨åˆ†æˆ–å…¨éƒ¨ Consumer ä¸åœ¨çº¿</strong>ï¼šå¦‚æœé‡‡ç”¨æ¨æ¨¡å¼ï¼Œå› ä¸ºæ— æ³•é¢„çŸ¥ Consumer çš„å®•æœºæˆ–ä¸‹çº¿æ˜¯çŸ­æš‚çš„è¿˜æ˜¯æŒä¹…çš„ï¼Œå¦‚æœä¸€ç›´ä¸ºè¯¥ Consumer ä¿ç•™è‡ªå®•æœºå¼€å§‹çš„æ‰€æœ‰å†å²æ¶ˆæ¯ï¼Œé‚£ä¹ˆå³ä¾¿å…¶ä»–æ‰€æœ‰çš„ Consumer éƒ½å·²ç»æ¶ˆè´¹å®Œæˆï¼Œæ•°æ®ä¹Ÿæ— æ³•æ¸…ç†æ‰ï¼Œéšç€æ—¶é—´çš„ç§¯ç´¯ï¼Œé˜Ÿåˆ—çš„é•¿åº¦ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæ­¤æ—¶æ— è®ºæ¶ˆæ¯æ˜¯æš‚å­˜äºå†…å­˜è¿˜æ˜¯æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼ˆé‡‡ç”¨ Push æ¨¡å‹çš„ç³»ç»Ÿï¼Œä¸€èˆ¬éƒ½æ˜¯å°†æ¶ˆæ¯é˜Ÿåˆ—ç»´æŠ¤äºå†…å­˜ä¸­ï¼Œä»¥ä¿è¯æ¨é€çš„æ€§èƒ½å’Œå®æ—¶æ€§ï¼‰ï¼Œéƒ½å°†å¯¹ CMQ æœåŠ¡ç«¯é€ æˆå·¨å¤§å‹åŠ›ï¼Œç”šè‡³å¯èƒ½å½±å“åˆ°å…¶ä»– Consumer çš„æ­£å¸¸æ¶ˆè´¹ï¼Œå°¤å…¶å½“æ¶ˆæ¯çš„ç”Ÿäº§é€Ÿç‡éå¸¸å¿«æ—¶æ›´æ˜¯å¦‚æ­¤ï¼›ä½†æ˜¯å¦‚æœä¸ä¿ç•™æ•°æ®ï¼Œé‚£ä¹ˆç­‰è¯¥ Consumer å†æ¬¡èµ·æ¥æ—¶ï¼Œåˆ™è¦é¢å¯¹ä¸¢å¤±æ•°æ®çš„é—®é¢˜ã€‚ æŠ˜ä¸­çš„æ–¹æ¡ˆæ˜¯ï¼šCMQ ç»™æ•°æ®è®¾å®šä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå½“ Consumer å®•æœºæ—¶é—´è¶…è¿‡è¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œåˆ™æ¸…ç†æ•°æ®ï¼›ä½†è¿™ä¸ªæ—¶é—´é˜ˆå€¼ä¹Ÿå¹¶ä¸å¤ªå®¹æ˜“ç¡®å®šã€‚ é‡‡ç”¨æ‹‰æ¨¡å¼ï¼Œæƒ…å†µä¼šæœ‰æ‰€æ”¹å–„ï¼›æœåŠ¡ç«¯ä¸å†å…³å¿ƒ Consumer çš„çŠ¶æ€ï¼Œè€Œæ˜¯é‡‡å–â€œä½ æ¥äº†æˆ‘æ‰æœåŠ¡â€çš„æ–¹å¼ï¼ŒConsumer æ˜¯å¦èƒ½å¤ŸåŠæ—¶æ¶ˆè´¹æ•°æ®ï¼ŒæœåŠ¡ç«¯ä¸ä¼šåšä»»ä½•ä¿è¯ï¼ˆä¹Ÿæœ‰è¶…æ—¶æ¸…ç†æ—¶é—´ï¼‰ã€‚</li></ol><h2 id="å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½" tabindex="-1">å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½ <a class="header-anchor" href="#å¸¸è§æ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½" aria-hidden="true">#</a></h2><table><thead><tr><th><strong>åŠŸèƒ½ç‰¹æ€§</strong></th><th><strong>RocketMQ</strong></th><th><strong>MsgBrokerï¼ˆèš‚èšå†…éƒ¨ï¼‰</strong></th><th><strong>Kafka</strong></th><th><strong>RabbitMQ</strong></th></tr></thead><tbody><tr><td>äº‹åŠ¡æ¶ˆæ¯</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>å»¶è¿Ÿæ¶ˆæ¯</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>ğŸš«</td></tr><tr><td>ä¼˜å…ˆçº§æ¶ˆæ¯</td><td>ğŸš«</td><td>ğŸš«</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td>é¡ºåºæ¶ˆæ¯</td><td>âœ…</td><td>ğŸš«</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æ¶ˆæ¯è½¨è¿¹</td><td>âœ…</td><td>âœ…</td><td>ğŸš«</td><td>âœ…</td></tr><tr><td>æ¶ˆæ¯è¿‡æ»¤</td><td>âœ…</td><td>âœ…</td><td>ğŸš«</td><td>ğŸš«</td></tr><tr><td>æ¶ˆè´¹æ¨¡å¼</td><td>æ‹‰</td><td>æ¨</td><td>æ‹‰</td><td>æ¨ã€æ‹‰</td></tr><tr><td>ç§¯å‹èƒ½åŠ›</td><td>å¼ºï¼ˆäº¿çº§ï¼‰</td><td>å¼±ï¼ˆç™¾ä¸‡çº§ï¼‰</td><td>å¼º</td><td>å¼±</td></tr><tr><td>å­˜å‚¨æ¨¡å¼</td><td>ç£ç›˜</td><td>DB</td><td>ç£ç›˜</td><td>ç£ç›˜</td></tr><tr><td>å¯é æ€§</td><td>ä¸­</td><td>é«˜</td><td>ä¸­</td><td>ä¸­</td></tr></tbody></table><h2 id="æŠ•é€’-æ¶ˆè´¹è¯­ä¹‰" tabindex="-1">æŠ•é€’&amp;æ¶ˆè´¹è¯­ä¹‰ <a class="header-anchor" href="#æŠ•é€’-æ¶ˆè´¹è¯­ä¹‰" aria-hidden="true">#</a></h2><h3 id="æŠ•é€’è¯­ä¹‰" tabindex="-1">æŠ•é€’è¯­ä¹‰ <a class="header-anchor" href="#æŠ•é€’è¯­ä¹‰" aria-hidden="true">#</a></h3><p><strong>æœ€å¤šä¸€æ¬¡</strong>ï¼š<code>Producer</code>ä¸ç­‰å¾…<code>Broker</code>ç¡®è®¤ï¼Œåªç®¡å‘å‡ºå³å¯ï¼›æœ€å¯èƒ½ä¸¢å¤±æ¶ˆæ¯ã€‚å¦‚æœä¸¢äº†æ¶ˆæ¯ï¼Œå°±æ˜¯æŠ•é€’0æ¬¡ã€‚å¦‚æœæ²¡ä¸¢ï¼Œå°±æ˜¯æŠ•é€’1æ¬¡ã€‚</p><p><strong>æœ€å°‘ä¸€æ¬¡</strong>ï¼š<code>Producer</code>å‘é€ç»™<code>Broker</code>å¹¶ç­‰å¾…è¿”å›<code>ACK</code>ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æœæœªæ”¶åˆ°<code>ACK</code>ï¼Œåˆ™ä¼šé‡æ–°å‘é€ï¼Œè¿™æ ·å°±ä¼šå‡ºç°å¤§äº1æ¬¡çš„æŠ•é€’æƒ…å†µã€‚</p><p><strong>æ°å¥½ä¸€æ¬¡</strong>ï¼š<code>Producer</code>æ¯æ¡æ¶ˆæ¯æœ‰å”¯ä¸€çš„ç¼–å·ï¼Œ<code>Broker</code>ä¹Ÿä¼šæ£€æŸ¥<code>Producer</code>çš„ç¼–å·ï¼Œå¦‚æœç¼–å·å·²å­˜åœ¨åˆ™ä¼šä¸¢å¼ƒï¼Œå¯ä»¥å®ç°æ°å¥½æŠ•é€’1æ¬¡ã€‚</p><h3 id="æ¶ˆè´¹è¯­ä¹‰" tabindex="-1">æ¶ˆè´¹è¯­ä¹‰ <a class="header-anchor" href="#æ¶ˆè´¹è¯­ä¹‰" aria-hidden="true">#</a></h3><p><strong>æœ€å¤šä¸€æ¬¡</strong>ï¼š<code>Broker</code>æŠ•é€’å®Œæ¶ˆæ¯å³è®¤ä¸ºæ˜¯æ¶ˆè´¹æˆåŠŸï¼Œæ— éœ€ç­‰å¾…<code>Comsumer</code>è¿”å›<code>ACK</code>ç¡®è®¤ï¼Œæœ‰å¯èƒ½<code>Comsumer</code>æ¶ˆè´¹çš„æ—¶å€™å®•æœºå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œå› æ­¤æœ€å¤šæ¶ˆè´¹ä¸€æ¬¡</p><p><strong>æœ€å°‘ä¸€æ¬¡</strong>ï¼š<code>Broker</code>æŠ•é€’å®Œæ¶ˆæ¯ä¼šéœ€è¦<code>Comsumer</code>è¿”å›<code>ACK</code>ç¡®è®¤ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°<code>ACK</code>ï¼Œåˆ™ä¼šé‡æ–°å‘é€</p><p><strong>æ°å¥½ä¸€æ¬¡</strong>ï¼š<code>Broker</code>æŠ•é€’å®Œæ¶ˆæ¯ä¼šéœ€è¦<code>Comsumer</code>è¿”å›<code>ACK</code>ç¡®è®¤ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°<code>ACK</code>ï¼Œåˆ™ä¼šé‡æ–°å‘é€ï¼ŒåŒæ—¶<code>Comsumer</code>éœ€è¦å®ç°å¹‚ç­‰é€»è¾‘ï¼Œä¿è¯æ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹</p><h2 id="åŠŸèƒ½ç‰¹æ€§" tabindex="-1">åŠŸèƒ½ç‰¹æ€§ <a class="header-anchor" href="#åŠŸèƒ½ç‰¹æ€§" aria-hidden="true">#</a></h2><h3 id="äº‹åŠ¡æ¶ˆæ¯" tabindex="-1">äº‹åŠ¡æ¶ˆæ¯ <a class="header-anchor" href="#äº‹åŠ¡æ¶ˆæ¯" aria-hidden="true">#</a></h3><h4 id="ä½¿ç”¨åœºæ™¯" tabindex="-1">ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a></h4><p>ç”¨æˆ·å‘èµ·è®¢å•ï¼Œæ”¯ä»˜100å—é’±æ“ä½œå®Œæˆåï¼Œèƒ½å¾—åˆ°100ç§¯åˆ†ï¼Œè´¦æˆ·æœåŠ¡å’Œä¼šå‘˜æœåŠ¡æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡æ¨¡å—ï¼Œæœ‰å„è‡ªçš„æ•°æ®åº“ï¼ŒæŒ‰ç…§ä¸Šæ–‡æåŠçš„é—®é¢˜å¯èƒ½æ€§ï¼Œå°†ä¼šå‡ºç°è¿™äº›æƒ…å†µï¼š</p><ul><li>å¦‚æœå…ˆæ‰£æ¬¾ï¼Œå†å‘æ¶ˆæ¯ï¼Œå¯èƒ½é’±åˆšæ‰£å®Œï¼Œæ¶ˆæ¯æ²¡å‘å¤±è´¥äº†ï¼Œç»“æœç§¯åˆ†æ²¡å¢åŠ ã€‚</li><li>å¦‚æœå…ˆå‘æ¶ˆæ¯ï¼Œå†æ‰£æ¬¾ï¼Œå¯èƒ½ç§¯åˆ†å¢åŠ äº†ï¼Œä½†é’±æ²¡æ‰£æ‰ï¼Œç™½é€äº†100ç§¯åˆ†</li><li>é’±æ­£å¸¸æ‰£äº†ï¼Œæ¶ˆæ¯ä¹Ÿå‘é€æˆåŠŸäº†ï¼Œä½†ä¼šå‘˜æœåŠ¡å®ä¾‹æ¶ˆè´¹æ¶ˆæ¯å‡ºç°é—®é¢˜ï¼Œç»“æœç§¯åˆ†æ²¡å¢åŠ </li></ul><p><strong>äº‹åŠ¡æ¶ˆæ¯å°±æ˜¯ä¿è¯æœ¬åœ°äº‹åŠ¡æ“ä½œå’Œmqæ¶ˆæ¯çš„å‘é€æ˜¯ä¸€è‡´çš„ï¼Œå³æœ¬åœ°äº‹åŠ¡æˆåŠŸï¼Œæ¶ˆæ¯ä¸€å®šå‘é€å‡ºå»ï¼Œæœ¬åœ°äº‹åŠ¡å¤±è´¥ï¼Œæ¶ˆæ¯ä¸€å®šæœªè¢«æ¶ˆè´¹</strong></p><h5 id="æ•´ä½“æµç¨‹" tabindex="-1">æ•´ä½“æµç¨‹ <a class="header-anchor" href="#æ•´ä½“æµç¨‹" aria-hidden="true">#</a></h5>',26),u=a('<h5 id="å¼‚å¸¸æƒ…å†µ" tabindex="-1">å¼‚å¸¸æƒ…å†µ <a class="header-anchor" href="#å¼‚å¸¸æƒ…å†µ" aria-hidden="true">#</a></h5><ol><li><p><code>Producer</code>å‘é€åŠæ¶ˆæ¯å¤±è´¥</p><p>å¯èƒ½ç”±äºç½‘ç»œæˆ–è€…mqæ•…éšœï¼Œå¯¼è‡´<code>Producer</code>å‘é€åŠæ¶ˆæ¯(prepare)å¤±è´¥ï¼Œè¿™æ—¶å€™<code>Producer</code>ç›´æ¥å›æ»šæœ¬åœ°äº‹åŠ¡å°±å¯ä»¥äº†</p></li><li><p>åŠæ¶ˆæ¯å‘é€æˆåŠŸï¼Œæœ¬åœ°äº‹åŠ¡æ‰§è¡Œå¤±è´¥</p><p>å‘é€æ–¹æ‰§è¡Œ<code>rollback</code>ç»™<code>MQ</code>ï¼Œ<code>MQ</code>ä¼šåˆ é™¤ä¹‹å‰å‘é€çš„åŠæ¶ˆæ¯ï¼Œæ¶ˆè´¹ç«¯ä¹Ÿå°±æ”¶ä¸åˆ°è¿™æ¡æ¶ˆæ¯</p></li><li><p>åŠæ¶ˆæ¯å‘é€æˆåŠŸï¼Œæœ¬åœ°äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹å®•æœº</p><p><code>Broker</code>ä¸€ç›´æ¥å—ä¸åˆ°<code>Producer</code>çš„ç¡®è®¤ç»“æœï¼Œå› æ­¤å°±ä¼šè°ƒ<code>Producer</code>æä¾›çš„æŸ¥è¯¢æ¥å£æ¥åˆ¤æ–­æœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆæ‰§è¡Œç»“æœ</p></li></ol><p><strong>æ€è€ƒ1</strong>ï¼š äº‹åŠ¡å›æŸ¥æ—¶ï¼Œä¸šåŠ¡é€»è¾‘éƒ½éœ€è¦åšäº›ä»€ä¹ˆï¼Ÿ</p><details class="details custom-block"><summary>ç­”æ¡ˆ</summary><p>äº‹åŠ¡æ¶ˆæ¯çš„ Check æ–¹æ³•é‡Œé¢ï¼Œåº”è¯¥å†™ä¸€äº›æ£€æŸ¥äº‹åŠ¡ä¸€è‡´æ€§çš„é€»è¾‘ã€‚æ¶ˆæ¯é˜Ÿåˆ—å‘é€äº‹åŠ¡æ¶ˆæ¯æ—¶éœ€è¦å®ç°<code>LocalTransactionChecker</code>æ¥å£ï¼Œç”¨æ¥å¤„ç†<code>Broker</code>ä¸»åŠ¨å‘èµ·çš„æœ¬åœ°äº‹åŠ¡çŠ¶æ€å›æŸ¥è¯·æ±‚ï¼›å› æ­¤éœ€è¦å®Œæˆä¸¤ä»¶äº‹æƒ…ï¼š</p><ol><li>æ£€æŸ¥è¯¥åŠäº‹åŠ¡æ¶ˆæ¯å¯¹åº”çš„æœ¬åœ°äº‹åŠ¡çš„çŠ¶æ€ï¼ˆcommitted or rollbackï¼‰ã€‚</li><li>å‘ Broker æäº¤è¯¥åŠäº‹åŠ¡æ¶ˆæ¯æœ¬åœ°äº‹åŠ¡çš„çŠ¶æ€ã€‚</li></ol></details><p><strong>æ€è€ƒ2</strong>ï¼š <code>RocketMQ</code>æ˜¯æ€ä¹ˆä¿è¯åŠæ¶ˆæ¯(prepare)ä¸è¢«æ¶ˆè´¹è€…æ¶ˆè´¹å‘¢ï¼Ÿ</p><details class="details custom-block"><summary>ç­”æ¡ˆ</summary><ol><li><code>Broker</code>ç«¯æ”¶åˆ°æ¶ˆæ¯åï¼Œæ ¹æ®<code>TRAN_MSG</code>å€¼åˆ¤æ–­æ˜¯å¦äº‹åŠ¡æ¶ˆæ¯ã€‚åˆ™å°†æ¶ˆæ¯è½¬å­˜åˆ°<code>topic: RMQ_SYS_TRANS_HALF_TOPIC</code>ï¼Œ<code>queueId: 0</code></li><li>å¦‚æœæœ¬åœ°äº‹åŠ¡çŠ¶æ€æ˜¯<code>commit</code>ï¼Œ<code>Broker</code>æ¢å¤åŸ <code>topic</code>ï¼Œ<code>queueId</code>, <code>Consumer</code>å¯ä»¥æ­£å¸¸æ¶ˆè´¹äº‹åŠ¡æ¶ˆæ¯</li><li>å¦‚æœæœ¬åœ°äº‹åŠ¡çŠ¶æ€æ˜¯<code>rollback</code>ï¼ŒæŠŠæ¶ˆæ¯æ”¾å…¥<code>RMQ_SYS_TRANS_OP_HALF_TOPIC</code> å¹¶é€šè¿‡è®¾ç½®<code>tags = d</code>æ ‡è¯†è¯¥æ¶ˆæ¯å·²è¢«åˆ é™¤</li></ol></details><h3 id="å»¶è¿Ÿæ¶ˆæ¯" tabindex="-1">å»¶è¿Ÿæ¶ˆæ¯ <a class="header-anchor" href="#å»¶è¿Ÿæ¶ˆæ¯" aria-hidden="true">#</a></h3><p>ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·ä¸‹å•æœªä»˜æ¬¾ï¼Œ30åˆ†é’Ÿåéœ€è¦å…³é—­è®¢å•</p><p>å¸¸è§åšæ³•ï¼šä½¿ç”¨<code>redis</code>çš„<code>zset</code>é›†åˆï¼Œå°†å»¶è¿Ÿä»»åŠ¡æŒ‰ç…§è¿‡æœŸæ—¶é—´æ’åºï¼Œç„¶åå®šæ—¶å™¨ä¸æ–­çš„å»è½®è®­ ä¼˜ç‚¹ï¼šç®€å•æ–¹ä¾¿ ç¼ºç‚¹ï¼šå ç”¨çš„å­˜å‚¨ç©ºé—´è¾ƒå¤§ï¼Œå®šæ—¶è½®è¯¢ä¼šé€ æˆä¸å¿…è¦çš„è¯·æ±‚</p><p>é—®ï¼šç›´æ¥ç”¨<code>DelayQueue</code>æ€ä¹ˆæ ·ï¼Ÿ ç­”ï¼š<code>DelayQueue</code>æ˜¯<code>JDK</code>æä¾›çš„å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå¯¹äºæœ‰å»¶è¿Ÿéœ€æ±‚çš„åœºæ™¯ï¼Œç›´æ¥ç”¨<code>DelayQueue</code>æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸æ”¯æŒå¯¹å»¶è¿Ÿä»»åŠ¡è¿›è¡Œä¿®æ”¹æˆ–åˆ é™¤æ“ä½œï¼ŒåŒæ—¶å¦‚æœä»»åŠ¡è¿‡å¤šï¼Œä¼šé€ æˆ<code>DelayQueue</code>ç©ºé—´å ç”¨è¿‡å¤§</p><h4 id="kafkaæ—¶é—´è½®" tabindex="-1">Kafkaæ—¶é—´è½® <a class="header-anchor" href="#kafkaæ—¶é—´è½®" aria-hidden="true">#</a></h4>',11),g=e("code",null,"Kafka",-1),m=e("code",null,"1ms",-1),_=e("code",null,"TimerTaskList",-1),b=e("code",null,"TimerTask",-1),f=e("code",null,"0",-1),k=e("code",null,"2ms",-1),y=e("code",null,"8ms",-1),T=e("code",null,"2ms",-1),x=e("code",null,"8ms",-1),I=e("code",null,"10ms",-1),C=e("code",null,"10ms",-1),S=e("code",null,"2ms",-1),q=e("code",null,"19ms",-1),A=e("code",null,"2ms",-1),P=e("code",null,"19ms",-1),B=e("code",null,"21ms",-1),z=e("code",null,"21ms",-1),D=e("code",null,"2ms",-1),v=e("code",null,"22ms",-1),L=e("code",null,"2ms",-1),j=e("code",null,"22ms",-1),O=e("code",null,"24ms",-1),M=e("code",null,"24ms",-1),w=e("code",null,"24ms",-1),N=e("code",null,"24ms",-1),E=e("code",null,"40",-1),V=e("code",null,"[0-399s]",-1),Q=e("code",null,"60",-1),R=e("code",null,"[0-7999s]",-1),H=a('<p><strong>æ€»ç»“</strong></p><ul><li>Kafka ä½¿ç”¨æ—¶é—´è½®æ¥å®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Œå› ä¸ºå…¶åº•å±‚æ˜¯ä»»åŠ¡çš„æ·»åŠ å’Œåˆ é™¤æ˜¯åŸºäºé“¾è¡¨å®ç°çš„ï¼Œæ˜¯ O(1) çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ»¡è¶³é«˜æ€§èƒ½çš„è¦æ±‚</li><li>DelayQueue åªå­˜æ”¾äº† TimerTaskListï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ TimerTaskï¼Œæ•°é‡å¹¶ä¸å¤šï¼Œç›¸æ¯”ç©ºæ¨è¿›å¸¦æ¥çš„å½±å“æ˜¯åˆ©å¤§äºå¼Šçš„</li><li>å¯¹äºæ—¶é—´è·¨åº¦å¤§çš„å»¶æ—¶ä»»åŠ¡ï¼ŒKafka å¼•å…¥äº†å±‚çº§æ—¶é—´è½®ï¼Œèƒ½æ›´å¥½æ§åˆ¶æ—¶é—´ç²’åº¦ï¼Œå¯ä»¥åº”å¯¹æ›´åŠ å¤æ‚çš„å®šæ—¶ä»»åŠ¡å¤„ç†åœºæ™¯</li></ul><p><strong>æ€è€ƒ</strong>ï¼š æ’å…¥ä¸€ä¸ªå»¶æ—¶æ—¶é—´<code>400ms</code>çš„ä»»åŠ¡, æŒ‡é’ˆå°±è¦æ‰§è¡Œ<code>399</code>æ¬¡&quot;ç©ºæ¨è¿›&quot;å—ï¼Ÿ</p><details class="details custom-block"><summary>ç­”æ¡ˆ</summary><pre><code>Kafkaé€šè¿‡ä¸€ä¸ª`DelayQueue`ä¿å­˜äº†æ‰€æœ‰çš„`TimerTaskList`å¯¹è±¡ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå«åš`ExpiredOperationReaper`çš„çº¿ç¨‹ä» `DelayQueue`\nä¸­è·å–è¶…æ—¶çš„ä»»åŠ¡åˆ—è¡¨ `TimerTaskList`ï¼Œç„¶åæ ¹æ®`TimerTaskList` çš„è¿‡æœŸæ—¶é—´æ¥ç²¾ç¡®æ¨è¿›æ—¶é—´è½®çš„æ—¶é—´ï¼Œè¿™æ ·å°±ä¸ä¼šå­˜åœ¨ç©ºæ¨è¿›çš„é—®é¢˜ï¼Œ\n</code></pre></details><h4 id="rocketmqå†…éƒ¨ç‰ˆ" tabindex="-1">rocketmqå†…éƒ¨ç‰ˆ <a class="header-anchor" href="#rocketmqå†…éƒ¨ç‰ˆ" aria-hidden="true">#</a></h4><p>rocketmqåœ¨kafkaçš„æ—¶é—´è½®åŸºç¡€ä¸Šæä¾›äº†å»¶è¿Ÿæ¶ˆæ¯å¯é çš„å­˜å‚¨æ–¹å¼</p>',6),Y=a("<li><p>æ—¶é—´è½®çš„æ¯ä¸€æ ¼è®¾è®¡å¦‚ä¸‹</p><table><thead><tr><th>delay_time(8B) å»¶è¿Ÿæ—¶é—´</th><th>first_pos é¦–æ¡ä½ç½®</th><th>last_pos(8B) æœ€åä½ç½®</th><th>num(4B) æ¶ˆæ¯æ¡æ•°</th></tr></thead></table></li><li><p><code>TimerLog</code>ï¼šå®šæ—¶æ¶ˆæ¯çš„è®°å½•æ–‡ä»¶ï¼ŒAppend Onlyã€‚æ¯æ¡è®°å½•åŒ…å«ä¸€ä¸ª<code>prev_pos</code>ï¼ŒæŒ‡å‘å‰ä¸€æ¡å®šæ—¶åˆ°åŒæ ·æ—¶åˆ»çš„è®°å½•</p></li>",2),W=e("code",null,"TimerLog",-1),K=e("code",null,"TimerWheel",-1),J=e("h5",{id:"å·¥ä½œæµç¨‹",tabindex:"-1"},[t("å·¥ä½œæµç¨‹ "),e("a",{class:"header-anchor",href:"#å·¥ä½œæµç¨‹","aria-hidden":"true"},"#")],-1),G=a('<ol><li>é’ˆå¯¹æ”¾ç½®å®šæ—¶æ¶ˆæ¯çš„<code>service</code>ï¼Œæ¯<code>50ms</code>ä»<code>commitLog</code>è¯»å–æŒ‡å®š<code>topic</code>çš„å®šæ—¶æ¶ˆæ¯ <ol><li><code>TimerEnqueueGetService</code>ä»<code>commitLog</code>è¯»å–å¾—åˆ°å®šæ—¶ä¸»é¢˜çš„æ¶ˆæ¯ï¼Œå¹¶å…ˆå°†å…¶æ”¾å…¥<code>enqueuePutQueue</code></li><li>å¦ä¸€ä¸ªçº¿ç¨‹<code>TimerEnqueuePutService</code>å°†å…¶æ”¾å…¥<code>timerLog</code>ï¼Œæ›´æ–°æ—¶é—´è½®çš„å­˜å‚¨å†…å®¹ã€‚å°†è¯¥ä»»åŠ¡æ”¾è¿›æ—¶é—´è½®çš„æŒ‡å®šä½ç½®</li></ol></li><li>é’ˆå¯¹å–å‡ºå®šæ—¶æ¶ˆæ¯çš„<code>service</code>ï¼Œæ¯<code>50ms</code>è¯»å–ä¸‹ä¸€ç§’çš„<code>slot</code>ã€‚æœ‰ä¸‰ä¸ªçº¿ç¨‹å°†è¯»å–åˆ°çš„æ¶ˆæ¯é‡æ–°æ”¾å›<code>commitLog</code><ol><li>é¦–å…ˆï¼Œ<code>TimerDequeueGetService</code>æ¯<code>50ms</code>è¯»å–ä¸‹ä¸€ç§’çš„<code>slot</code>ï¼Œä»<code>timerLog</code>ä¸­å¾—åˆ°æŒ‡å®šçš„<code>msgs</code>ï¼Œå¹¶æ”¾è¿›<code>dequeueGetQueue</code></li><li>è€Œå<code>TimerDequeueGetMessageService</code>ä»<code>dequeueGetQueue</code>ä¸­å–å‡º<code>msg</code>ï¼Œå¹¶å°†å…¶æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚è¯¥é˜Ÿåˆ—ä¸ºå¾…å†™å…¥<code>commitLog</code>çš„é˜Ÿåˆ—<code>dequeuePutQueue</code></li><li>æœ€å<code>TimerDequeuePutMessageService</code>å°†è¿™ä¸ª<code>queue</code>ä¸­çš„æ¶ˆæ¯å–å‡ºï¼Œè‹¥å·²åˆ°æœŸåˆ™ä¿®æ”¹<code>topic</code>ï¼Œæ”¾å›<code>commitlog</code>ï¼Œå¦åˆ™ç»§ç»­æŒ‰åŸ<code>topic</code>å†™å›<code>commitLog</code>æ»šåŠ¨æ—¥å¿—</li></ol></li></ol><p>ç¼ºç‚¹</p><ul><li>åªèƒ½ç²¾ç¡®åˆ°ç§’çº§</li><li>é¡ºåºçš„å†™ä¼šå¸¦æ¥éšæœºçš„è¯»ï¼Œå¯¼è‡´è¯»å–æ€§èƒ½è¾ƒä½</li></ul><h4 id="rocketmqç¤¾åŒºç‰ˆ" tabindex="-1">rocketmqç¤¾åŒºç‰ˆ <a class="header-anchor" href="#rocketmqç¤¾åŒºç‰ˆ" aria-hidden="true">#</a></h4><p>RocketMQç¤¾åŒºç‰ˆæ”¯æŒå»¶è¿Ÿæ¶ˆæ¯ï¼Œä½†æ˜¯ä¸æ”¯æŒä»»æ„æ—¶é—´ç²¾åº¦çš„å»¶è¿Ÿæ¶ˆæ¯ï¼Œåªæ”¯æŒç‰¹å®šçº§åˆ«çš„å»¶è¿Ÿæ¶ˆæ¯ æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«åˆ†åˆ«ä¸º<code>1s</code>, <code>5s</code>, <code>10s</code>, <code>30s</code>, <code>1min</code>, <code>2min</code>, <code>3min</code>, <code>4min</code>, <code>5min</code>, <code>6min</code>, <code>7min</code>, <code>8min</code>, <code>9min</code>, <code>10min</code>, <code>20min</code>, <code>30min</code>, <code>1h</code>, <code>2h</code>,ï¼Œå…±18ä¸ªçº§åˆ«ã€‚åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œè®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«å³å¯ï¼Œè®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«æ—¶æœ‰ä»¥ä¸‹3ç§æƒ…å†µï¼š</p><ol><li>è®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«ç­‰äº0æ—¶ï¼Œåˆ™è¯¥æ¶ˆæ¯ä¸ºéå»¶è¿Ÿæ¶ˆæ¯ã€‚</li><li>è®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«å¤§äºç­‰äº1å¹¶ä¸”å°äºç­‰äº18æ—¶ï¼Œæ¶ˆæ¯å»¶è¿Ÿç‰¹å®šæ—¶é—´ï¼Œå¦‚ï¼šè®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«ç­‰äº1ï¼Œåˆ™å»¶è¿Ÿ1sï¼›è®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«ç­‰äº2ï¼Œåˆ™å»¶è¿Ÿ5sï¼Œä»¥æ­¤ç±»æ¨ã€‚</li><li>è®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«å¤§äº18æ—¶ï¼Œåˆ™è¯¥æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«ä¸º18ï¼Œå¦‚ï¼šè®¾ç½®æ¶ˆæ¯å»¶è¿Ÿçº§åˆ«ç­‰äº20ï¼Œåˆ™å»¶è¿Ÿ2hã€‚</li></ol><p><strong>åŸç†</strong> RocketMQå‘é€å»¶æ—¶æ¶ˆæ¯æ—¶å…ˆæŠŠæ¶ˆæ¯æŒ‰ç…§å»¶è¿Ÿæ—¶é—´æ®µå‘é€åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå®šæ—¶å™¨è¿›è¡Œè½®è®­è¿™äº›é˜Ÿåˆ—ï¼ŒæŸ¥çœ‹æ¶ˆæ¯æ˜¯å¦åˆ°æœŸï¼Œå¦‚æœåˆ°æœŸå°±æŠŠè¿™ä¸ªæ¶ˆæ¯å‘é€åˆ°æŒ‡å®štopicçš„é˜Ÿåˆ—ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯åŒä¸€é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯å»¶æ—¶æ—¶é—´æ˜¯ä¸€è‡´çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯è¿™ä¸ªé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æ—¶æŒ‰ç…§æ¶ˆæ¯åˆ°æœŸæ—¶é—´è¿›è¡Œé€’å¢æ’åºçš„ï¼Œè¯´çš„ç®€å•ç›´ç™½å°±æ˜¯é˜Ÿåˆ—ä¸­æ¶ˆæ¯è¶Šé å‰çš„åˆ°æœŸæ—¶é—´è¶Šæ—©ã€‚</p><h3 id="é¡ºåºæ¶ˆæ¯" tabindex="-1">é¡ºåºæ¶ˆæ¯ <a class="header-anchor" href="#é¡ºåºæ¶ˆæ¯" aria-hidden="true">#</a></h3><p><code>Kafka</code>é€šè¿‡<code>key</code>ï¼Œå°†æŸç±»æ¶ˆæ¯å†™å…¥åŒä¸€ä¸ª<code>partition</code>ï¼Œä¸€ä¸ª<code>partition</code>åªèƒ½å¯¹åº”ä¸€ä¸ª<code>Consumer</code>ï¼Œä»¥ä¿è¯æ•°æ®æœ‰åºã€‚</p><p><strong>æ€è€ƒ1</strong>ï¼š<code>Producer</code>å…ˆåä¸¤æ¡æ¶ˆæ¯å‘é€æ—¶ï¼Œå‰ä¸€æ¡æ¶ˆæ¯å‘é€å¤±è´¥ï¼Œåä¸€æ¡æ¶ˆæ¯å‘é€æˆåŠŸï¼Œç„¶åå¤±è´¥çš„æ¶ˆæ¯é‡è¯•åå‘é€æˆåŠŸï¼Œä¼šä¸ä¼šé€ æˆæ¶ˆæ¯ä¹±åºï¼Ÿ</p><details class="details custom-block"><summary>ç­”æ¡ˆ1</summary><p>ä¸ºäº†è§£å†³é‡è¯•æœºåˆ¶å¼•èµ·çš„æ¶ˆæ¯ä¹±åºï¼Œ<code>Kafka</code>å¼•å…¥äº†<code>Producer ID</code>ï¼ˆå³PIDï¼‰å’Œ <code>Sequence Number</code></p><ul><li>åœ¨<code>Producer</code>ç«¯ï¼Œæ¯ä¸ª<code>Producer</code>éƒ½è¢«<code>Broker</code>è‡ªåŠ¨åˆ†é…äº†ä¸€ä¸ª<code>PID</code>ï¼Œ<code>Producer</code>å‘<code>Broker</code>å‘é€çš„æ¯æ¡æ¶ˆæ¯ï¼Œåœ¨å†…éƒ¨éƒ½é™„å¸¦ç€è¯¥<code>PID</code>å’Œä¸€ä¸ªé€’å¢çš„<code>Sequence Number</code></li><li>åœ¨<code>Broker</code>ç«¯ï¼Œä¸ºæ¯ä¸ª<code>Topic</code>çš„æ¯ä¸ª<code>Partition</code>éƒ½ç»´æŠ¤äº†ä¸€ä¸ªå½“å‰å†™æˆåŠŸçš„æ¶ˆæ¯çš„æœ€å¤§<code>&lt;PID, Sequence Number&gt;</code>å…ƒç»„ï¼Œå¦‚æœ<code>Sequence Number</code>æ¯”<code>Broker</code>ç»´æŠ¤çš„åºå·å·®å€¼å¤§äº<code>1</code>ï¼Œè¯´æ˜ä¸­é—´æœ‰æ•°æ®å°šæœªå†™å…¥ï¼Œå³ä¹±åºï¼Œæ­¤æ—¶<code>Broker</code>æ‹’ç»è¯¥æ¶ˆæ¯ï¼Œå¦‚æœ<code>Sequence Number</code>å°äºç­‰äº<code>Broker</code>ç»´æŠ¤çš„åºå·ï¼Œè¯´æ˜è¯¥æ¶ˆæ¯å·²è¢«ä¿å­˜ï¼Œå³ä¸ºé‡å¤æ¶ˆæ¯ï¼Œ<code>Broker</code>ç›´æ¥ä¸¢å¼ƒè¯¥æ¶ˆæ¯ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯ä¸ªæ¶ˆæ¯éƒ½è¢«å‘é€åˆ°<code>Broker</code></li></ul></details><p><strong>æ€è€ƒ2</strong>ï¼šåªæœ‰ä¸€ä¸ª<code>Partition</code>ä¼šå¯¼è‡´æ¶ˆè´¹è€…çš„ååé‡å˜ä½ï¼Œå¦‚æœæ¶ˆè´¹è€…å¯ç”¨å¤šçº¿ç¨‹æ¶ˆè´¹ï¼Œåˆ™æ¶ˆæ¯é‡æ–°å˜å¾—æ— åºï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</p>',12),Z={class:"details custom-block"},U=e("summary",null,"ç­”æ¡ˆ2",-1),F=e("code",null,"key",-1),X=e("h3",{id:"æ¶ˆæ¯è½¨è¿¹",tabindex:"-1"},[t("æ¶ˆæ¯è½¨è¿¹ "),e("a",{class:"header-anchor",href:"#æ¶ˆæ¯è½¨è¿¹","aria-hidden":"true"},"#")],-1),$=e("p",null,"ä¸€æ¡æ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸåŒ…å«å¤šä¸ªé˜¶æ®µï¼šå‘é€ç«¯å‘é€ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯ã€å†™å…¥æ¶ˆæ¯ã€æŠ•é€’æ¶ˆæ¯ç­‰ã€‚è€Œç”¨æˆ·åœ¨ä½¿ç”¨MQæ—¶ï¼Œæœ‰æ—¶ä¼šæƒ³çŸ¥é“æ¶ˆæ¯çš„å‘é€ã€æŠ•é€’ã€æ¶ˆè´¹æƒ…å†µï¼Œä»¥åŠæ¶ˆè´¹è€—æ—¶ã€æ¶ˆè´¹èŠ‚ç‚¹ã€æ˜¯å¦é‡æŠ•ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯éƒ½å±äºæ¶ˆæ¯è½¨è¿¹ã€‚ åœ¨æ²¡æœ‰å¯è§†åŒ–çš„æ¶ˆæ¯è½¨è¿¹ç•Œé¢æ—¶ï¼Œè½¨è¿¹ä¿¡æ¯éƒ½æ˜¯é€šè¿‡åŸå§‹çš„ç¿»æ—¥å¿—çš„æ–¹å¼æ¥æŸ¥è¯¢ã€‚éœ€è¦æ ¹æ®æœºå™¨èŠ‚ç‚¹çš„æ—¥å¿—ä¿¡æ¯æ‰¾åˆ°é“¾è·¯ï¼Œä¸€æ­¥ä¸€æ­¥æº¯æºæŸ¥æ‰¾ã€‚",-1),ee=a('<ul><li>ç³»ç»Ÿé»˜è®¤Topic</li></ul><p>å¦‚æœBrokerçš„traceTopicEnableé…ç½®è®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºåœ¨è¯¥Brokerä¸Šåˆ›å»ºtopicåä¸ºï¼š RMQ_SYS_TRACE_TOPICï¼Œé˜Ÿåˆ—ä¸ªæ•°ä¸º1ï¼Œé»˜è®¤è¯¥å€¼ä¸ºfalseï¼Œè¡¨ç¤ºè¯¥Brokerä¸æ‰¿è½½ç³»ç»Ÿè‡ªå®šä¹‰ç”¨äºå­˜å‚¨æ¶ˆæ¯è½¨è¿¹çš„topicã€‚</p><ul><li>è‡ªå®šä¹‰Topic</li></ul><p>åœ¨åˆ›å»ºæ¶ˆæ¯ç”Ÿäº§è€…æˆ–æ¶ˆæ¯æ¶ˆè´¹è€…æ—¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°è‡ªå®šä¹‰ç”¨äºè®°å½•æ¶ˆæ¯è½¨è¿¹çš„Topicåç§°ï¼Œä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œrokcetmqæ§åˆ¶å°(rocketmq-console) ä¸­åªæ”¯æŒé…ç½®ä¸€ä¸ªæ¶ˆæ¯è½¨è¿¹Topicï¼Œæ•…è‡ªå®šä¹‰Topicï¼Œåœ¨ç›®å‰è¿™ä¸ªé˜¶æ®µæˆ–è®¸è¿˜ä¸æ˜¯ä¸€ä¸ªæœ€ä½³å®è·µï¼Œå»ºè®®ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„Topicå³å¯ã€‚ é€šå¸¸ä¸ºäº†é¿å…æ¶ˆæ¯è½¨è¿¹çš„æ•°æ®ä¸æ­£å¸¸çš„ä¸šåŠ¡æ•°æ®æ··åˆåœ¨ä¸€èµ·ï¼Œå®˜æ–¹å»ºè®®ï¼Œåœ¨Brokeré›†ç¾¤ä¸­ï¼Œæ–°å¢åŠ ä¸€å°æœºå™¨ï¼Œåªåœ¨è¿™å°æœºå™¨ä¸Šå¼€å¯æ¶ˆæ¯è½¨è¿¹è·Ÿè¸ªï¼Œè¿™æ ·è¯¥é›†ç¾¤å†…çš„æ¶ˆæ¯è½¨è¿¹æ•°æ®åªä¼šå‘é€åˆ°è¿™ä¸€å°BrokeræœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¸ä¼šå¢åŠ é›†ç¾¤å†…åŸå…ˆä¸šåŠ¡Brokerçš„è´Ÿè½½å‹åŠ›ã€‚</p><h2 id="ç¨³å®šæ€§-æ€§èƒ½" tabindex="-1">ç¨³å®šæ€§&amp;æ€§èƒ½ <a class="header-anchor" href="#ç¨³å®šæ€§-æ€§èƒ½" aria-hidden="true">#</a></h2><h4 id="é«˜å¯ç”¨" tabindex="-1">é«˜å¯ç”¨ <a class="header-anchor" href="#é«˜å¯ç”¨" aria-hidden="true">#</a></h4><h5 id="ackæœºåˆ¶" tabindex="-1">ACKæœºåˆ¶ <a class="header-anchor" href="#ackæœºåˆ¶" aria-hidden="true">#</a></h5>',7),te=e("h5",{id:"æ¶ˆè´¹ä¸€è‡´æ€§",tabindex:"-1"},[t("æ¶ˆè´¹ä¸€è‡´æ€§ "),e("a",{class:"header-anchor",href:"#æ¶ˆè´¹ä¸€è‡´æ€§","aria-hidden":"true"},"#")],-1),oe=e("h4",{id:"é«˜æ€§èƒ½",tabindex:"-1"},[t("é«˜æ€§èƒ½ "),e("a",{class:"header-anchor",href:"#é«˜æ€§èƒ½","aria-hidden":"true"},"#")],-1),de=e("h5",{id:"é›¶æ‹·è´",tabindex:"-1"},[t("é›¶æ‹·è´ "),e("a",{class:"header-anchor",href:"#é›¶æ‹·è´","aria-hidden":"true"},"#")],-1),ae=e("h5",{id:"ç£ç›˜é¡ºåºè¯»å†™",tabindex:"-1"},[t("ç£ç›˜é¡ºåºè¯»å†™ "),e("a",{class:"header-anchor",href:"#ç£ç›˜é¡ºåºè¯»å†™","aria-hidden":"true"},"#")],-1),ie=e("h4",{id:"msgbroker",tabindex:"-1"},[t("msgbroker "),e("a",{class:"header-anchor",href:"#msgbroker","aria-hidden":"true"},"#")],-1),re=e("h4",{id:"rocketmq",tabindex:"-1"},[t("rocketmq "),e("a",{class:"header-anchor",href:"#rocketmq","aria-hidden":"true"},"#")],-1),ce=e("h5",{id:"_1-é€»è¾‘åˆ†åŒº",tabindex:"-1"},[t("1. é€»è¾‘åˆ†åŒº "),e("a",{class:"header-anchor",href:"#_1-é€»è¾‘åˆ†åŒº","aria-hidden":"true"},"#")],-1),ne=e("h5",{id:"_2-æŒä¹…åŒ–",tabindex:"-1"},[t("2. æŒä¹…åŒ– "),e("a",{class:"header-anchor",href:"#_2-æŒä¹…åŒ–","aria-hidden":"true"},"#")],-1),le=a('<h5 id="_3-æ¶ˆæ¯å‘é€" tabindex="-1">3. æ¶ˆæ¯å‘é€ <a class="header-anchor" href="#_3-æ¶ˆæ¯å‘é€" aria-hidden="true">#</a></h5><p>ä¸‰ç§å‘é€æ–¹å¼ï¼šåŒæ­¥/å¼‚æ­¥/å•å‘</p><p>æ¶ˆæ¯å‘é€çš„è¿”å›çŠ¶æ€æœ‰å¦‚ä¸‹å››ç§ : FLUSH_DISK_TIMEOUT ã€ FLUSH_SLAVE_TIMEOUT ã€SLAVE_NOT_AVAILABLE ã€SEND_OKï¼Œä¸åŒçŠ¶æ€åœ¨ä¸åŒçš„åˆ·ç›˜ç­–ç•¥å’ŒåŒæ­¥ç­–ç•¥çš„é…ç½®ä¸‹å«ä¹‰æ˜¯ä¸åŒçš„ ã€‚ <strong>FLUSH_DISK_TIMEOUT</strong> : è¡¨ç¤ºæ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…å®Œæˆåˆ·ç›˜(éœ€è¦ Broker çš„åˆ·ç›˜ç­–è¢«è®¾ç½®æˆ SYNC_FLUSH æ‰ä¼šæŠ¥è¿™ä¸ªé”™è¯¯) ã€‚ <strong>FLUSH_SLAVE_TIMEOUT</strong> :è¡¨ç¤ºåœ¨ä¸»å¤‡æ–¹å¼ä¸‹ï¼Œå¹¶ä¸” Brokerè¢«è®¾ ç½® æˆ SYNC_MASTER æ–¹å¼ï¼Œæ²¡æœ‰åœ¨è®¾å®šæ—¶é—´å†…å®Œæˆ ä¸»ä»åŒæ­¥ ã€‚ <strong>SLAVE_NOT_AVAILABLE</strong> : è¿™ä¸ªçŠ¶æ€ äº§ç”Ÿçš„åœºæ™¯å’Œ FLUSH_SLAVE_TIMEOUT ç±»ä¼¼ï¼Œ è¡¨ç¤ºåœ¨ä¸»å¤‡ æ–¹å¼ä¸‹ï¼Œå¹¶ä¸” Brokerè¢«è®¾ç½®æˆ SYNC_MASTERï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°è¢«é…ç½®æˆ Slave çš„ Brokerã€‚ <strong>SEND_ OK</strong> :è¡¨ç¤ºå‘é€æˆåŠŸï¼Œå‘é€æˆåŠŸçš„å…·ä½“å«ä¹‰ï¼Œæ¯”å¦‚æ¶ˆæ¯æ˜¯å¦å·²ç» è¢«å­˜å‚¨åˆ°èç›˜?æ¶ˆæ¯æ˜¯å¦è¢«åŒæ­¥åˆ°äº† Slaveä¸Š?æ¶ˆæ¯åœ¨ Slaveä¸Šæ˜¯å¦è¢« å†™äººç£ç›˜?éœ€è¦ç»“åˆæ‰€é…ç½®çš„åˆ·ç›˜ç­–ç•¥ã€ä¸»ä»ç­–ç•¥æ¥å®š ã€‚ è¿™ä¸ªçŠ¶æ€è¿˜å¯ ä»¥ç®€å•ç†è§£ä¸ºï¼Œæ²¡æœ‰å‘ç”Ÿä¸Šé¢åˆ—å‡ºçš„ ä¸‰ä¸ªé—®é¢˜çŠ¶æ€å°±æ˜¯ SEND OKã€‚</p><h5 id="_4-æ‰¹é‡ç”Ÿäº§-æ¶ˆè´¹" tabindex="-1">4. æ‰¹é‡ç”Ÿäº§/æ¶ˆè´¹ <a class="header-anchor" href="#_4-æ‰¹é‡ç”Ÿäº§-æ¶ˆè´¹" aria-hidden="true">#</a></h5>',4),se=a('<h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a></h2><p>ç›®å‰å›¢é˜Ÿä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„å…¸å‹ä¾‹å­ï¼š</p><table><thead><tr><th></th><th>SOFAMQç‰¹æ€§</th><th>Msgbrokerç‰¹æ€§</th></tr></thead><tbody><tr><td>infosec-&gt;infosectaskäº‹ä»¶æ¶ˆæ¯</td><td>å †ç§¯</td><td></td></tr><tr><td>infosectask-&gt;itaskæµå®¡æ¶ˆæ¯</td><td>å¤±è´¥é‡è¯•ã€å †ç§¯</td><td></td></tr><tr><td>infosectask-&gt;infostudioèƒ½åŠ›å¼‚æ­¥ç»“æœè½®è¯¢</td><td>å»¶è¿Ÿæ¶ˆæ¯</td><td></td></tr><tr><td>infosecé«˜ä¿åœºæ™¯æ¥å…¥</td><td></td><td>äº‹åŠ¡æ¶ˆæ¯ã€å­˜å‚¨é«˜å¯é </td></tr><tr><td>infosecäº‹ä»¶å¼‚æ­¥ç»“æœ</td><td></td><td>å¼‚æ­¥ã€è§£è€¦ã€å­˜å‚¨é«˜å¯é ã€æ¨æ¨¡å¼å®æ—¶å¼º</td></tr></tbody></table><h2 id="å‚è€ƒæ–‡æ¡£" tabindex="-1">å‚è€ƒæ–‡æ¡£ <a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a></h2><ul><li>æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆè´¹è¯­ä¹‰å’ŒæŠ•é€’è¯­ä¹‰ï¼š<a href="https://juejin.cn/post/6844903872029278215" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903872029278215</a></li><li>Msgbrokerï¼š<a href="https://yuque.antfin.com/middleware/msgbroker/pubsub" target="_blank" rel="noreferrer">https://yuque.antfin.com/middleware/msgbroker/pubsub</a></li><li>SOFAMQï¼š<a href="https://yuque.antfin.com/middleware/sofamq/common_msg" target="_blank" rel="noreferrer">https://yuque.antfin.com/middleware/sofamq/common_msg</a></li><li>æ¶ˆæ¯å¹‚ç­‰ï¼š<a href="https://help.aliyun.com/document_detail/177412.html" target="_blank" rel="noreferrer">https://help.aliyun.com/document_detail/177412.html</a></li><li>kafkaæ—¶é—´è½®ï¼š<a href="https://mp.weixin.qq.com/s/l5Kpg45-4MkOq_xfUczPPA" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/l5Kpg45-4MkOq_xfUczPPA</a></li><li>msgbroker æ¶ˆæ¯è½¨è¿¹ï¼š<a href="https://developer.alipay.com/post/496000358?inviterWorkNo=322773" target="_blank" rel="noreferrer">https://developer.alipay.com/post/496000358?inviterWorkNo=322773</a></li><li>rocketmqå»¶è¿Ÿæ¶ˆæ¯ï¼š<a href="https://mp.weixin.qq.com/s/iZL8M88gF7s5NmW7DYyYDQ" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/iZL8M88gF7s5NmW7DYyYDQ</a></li></ul>',5);function he(pe,ue,ge,me,_e,be){const o=c("q-img");return n(),r("div",null,[s,e("p",null,[d(o,{src:"/post/message-queue/intro.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),h,e("p",null,[d(o,{src:"/post/message-queue/pull&push.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),p,e("p",null,[d(o,{src:"/post/message-queue/shiwu.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),u,e("ol",null,[e("li",null,[e("p",null,[g,t("ä¸­ä¸€ä¸ªæ—¶é—´è½®(TimingWheel)é»˜è®¤æ˜¯ç”±20ä¸ªæ—¶é—´æ ¼ç»„æˆï¼Œæ¯æ ¼çš„æ—¶é—´è·¨åº¦æ˜¯"),m,t("ï¼Œæ—¶é—´è½®åº•å±‚é‡‡ç”¨æ•°ç»„å®ç°ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å¯ä»¥å­˜æ”¾ä¸€ä¸ªå®šæ—¶ä»»åŠ¡åˆ—è¡¨ï¼ˆTimerTaskListï¼‰ã€‚"),_,t("æ˜¯ä¸€ä¸ªç¯å½¢çš„åŒå‘é“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸€é¡¹è¡¨ç¤ºçš„éƒ½æ˜¯å®šæ—¶ä»»åŠ¡é¡¹ï¼ˆTimerTaskEntryï¼‰ï¼Œå…¶ä¸­å°è£…äº†çœŸæ­£çš„å®šæ—¶ä»»åŠ¡"),b,d(o,{src:"/post/message-queue/shijianlun1.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("å‡è®¾åˆå§‹çš„æ—¶å€™ä¸€ä¸ªæ ¼å­ä¸€ç§’ï¼Œæ—¶é—´è½®çš„æŒ‡é’ˆå®šæ ¼åœ¨"),f,t("ã€‚æ­¤æ—¶æ·»åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´ä¸º"),k,t("çš„ä»»åŠ¡, é‚£ä¹ˆè¿™ä¸ªä»»åŠ¡å°†ä¼šæ’å…¥åˆ°ç¬¬äºŒä¸ªæ—¶é—´æ ¼ä¸­ "),d(o,{src:"/post/message-queue/shijianlun2.gif",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("æ—¶é—´è½®çš„æŒ‡é’ˆåˆ°è¾¾ç¬¬äºŒä¸ªæ—¶é—´æ ¼æ—¶, ä¼šå¤„ç†è¯¥æ—¶é—´æ ¼ä¸Šå¯¹åº”çš„ä»»åŠ¡ "),d(o,{src:"/post/message-queue/shijianlun3.gif",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("å¦‚æœè¿™ä¸ªæ—¶å€™åˆæ’å…¥ä¸€ä¸ªå»¶æ—¶æ—¶é—´ä¸º"),y,t("çš„ä»»åŠ¡è¿›æ¥, è¿™ä¸ªä»»åŠ¡çš„è¿‡æœŸæ—¶é—´å°±æ˜¯åœ¨å½“å‰æ—¶é—´"),T,t("çš„åŸºç¡€ä¸ŠåŠ "),x,t(", ä¹Ÿå°±æ˜¯"),I,t(", é‚£ä¹ˆè¿™ä¸ªä»»åŠ¡å°†ä¼šæ’å…¥åˆ°è¿‡æœŸæ—¶é—´ä¸º"),C,t("çš„æ—¶é—´æ ¼ä¸­ã€‚ "),d(o,{src:"/post/message-queue/shijianlun4.gif",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("å¦‚æœåœ¨å½“å‰æ—¶é—´æ˜¯"),S,t("çš„æ—¶å€™, æ’å…¥ä¸€ä¸ªå»¶æ—¶æ—¶é—´ä¸º"),q,t("çš„ä»»åŠ¡æ—¶, è¿™ä¸ªä»»åŠ¡çš„è¿‡æœŸæ—¶é—´å°±æ˜¯åœ¨å½“å‰æ—¶é—´"),A,t("çš„åŸºç¡€ä¸ŠåŠ "),P,t(", ä¹Ÿå°±æ˜¯"),B,t("ï¼Œé‚£ä¹ˆè¿™ä¸ªä»»åŠ¡å°±ä¼šæ’å…¥åˆ°è¿‡æœŸæ—¶é—´ä¸º"),z,t("çš„æ—¶é—´æ ¼ä¸­ "),d(o,{src:"/post/message-queue/shijianlun5.gif",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("å¦‚æœåœ¨å½“å‰æ—¶é—´æ˜¯"),D,t("çš„æ—¶å€™, æ’å…¥ä¸€ä¸ªå»¶æ—¶æ—¶é—´ä¸º"),v,t("çš„ä»»åŠ¡, è¿™ä¸ªä»»åŠ¡çš„è¿‡æœŸæ—¶é—´å°±æ˜¯åœ¨"),L,t("çš„åŸºç¡€ä¸ŠåŠ "),j,t("ï¼Œä¹Ÿå°±æ˜¯"),O,t("ï¼Œä½†æ˜¯æ˜¾ç„¶æ²¡æœ‰"),M,t("çš„æ ¼å­ "),d(o,{src:"/post/message-queue/shijianlun6.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("ç¬¬ä¸€å±‚çš„æ—¶é—´è½®è£…ä¸ä¸‹çš„æ—¶å€™ï¼Œä»»åŠ¡å°±ä¼šæ”¾å…¥ç¬¬äºŒå±‚çš„æ—¶é—´è½®æ ¼å­ä¸­ "),d(o,{src:"/post/message-queue/shijianlun7.gif",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("å½“ç¬¬äºŒå±‚æ—¶é—´è½®ä¸Šçš„ä»»åŠ¡åˆ°æœŸåï¼Œå°±ä¼šæ‰§è¡Œæ—¶é—´è½®çš„é™çº§ï¼ŒåŸæœ¬è¶…æ—¶æ—¶é—´ä¸º"),w,t("çš„ä»»åŠ¡ä¼šè¢«ä»ç¬¬äºŒå±‚å–å‡ºæ¥ï¼Œæ”¾å…¥ç¬¬ä¸€å±‚åˆ°æœŸæ—¶é—´ä¸º"),N,t("çš„æ ¼å­ä¸­ "),d(o,{src:"/post/message-queue/shijianlun8.gif",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),e("li",null,[e("p",null,[t("ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºæ—¶é—´è½®çš„å·§å¦™ä¹‹å¤„ï¼Œä¸¤å±‚æ—¶é—´è½®åªç”¨äº†"),E,t("ä¸ªæ•°ç»„å…ƒç´ ï¼Œå´å¯ä»¥æ‰¿è½½"),V,t("çš„å®šæ—¶ä»»åŠ¡ã€‚è€Œä¸‰å±‚æ—¶é—´è½®ç”¨"),Q,t("ä¸ªæ•°ç»„å…ƒç´ ï¼Œå°±å¯ä»¥æ‰¿è½½"),R,t("çš„å®šæ—¶ä»»åŠ¡ "),d(o,{src:"/post/message-queue/shijianlun9.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])])]),H,e("ol",null,[Y,e("li",null,[e("p",null,[W,t("ä¸"),K,t("çš„åä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š "),d(o,{src:"/post/message-queue/r_shijianlun1.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])])]),J,e("p",null,[d(o,{src:"/post/message-queue/r_shijianlun1.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),G,e("details",Z,[U,e("p",null,[t("ç­”ï¼šæ¶ˆè´¹è€…ç«¯åˆ›å»ºå¤šä¸ªå†…å­˜é˜Ÿåˆ—ï¼Œå…·æœ‰ç›¸åŒ"),F,t("çš„æ•°æ®éƒ½è·¯ç”±åˆ°åŒä¸€ä¸ªå†…å­˜é˜Ÿåˆ—ï¼›ç„¶åæ¯ä¸ªçº¿ç¨‹åˆ†åˆ«æ¶ˆè´¹ä¸€ä¸ªå†…å­˜é˜Ÿåˆ—å³å¯ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¤šä¸ªé¡ºåºçš„åŒæ—¶å°½å¯èƒ½æé«˜ååé‡ "),d(o,{src:"/post/message-queue/shunxu.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),X,$,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1667220447378-24e397ad-a285-40dd-9047-88803459af4a.png#clientId=ud471318f-e47b-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=1455&id=u7ee5a91b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1455&originWidth=2971&originalType=binary&ratio=1&rotation=0&showTitle=false&size=149879&status=done&style=none&taskId=u3841ca9f-2858-4740-8fd8-585f899378c&title=&width=2971",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" æ—¢ç„¶æŠŠæ¶ˆæ¯è½¨è¿¹å½“æˆæ¶ˆæ¯å­˜å‚¨åœ¨BrokeræœåŠ¡å™¨ï¼Œé‚£å­˜å‚¨æ¶ˆæ¯è½¨è¿¹çš„Topicå¦‚ä½•ç¡®å®šå‘¢ï¼ŸRocketMQæä¾›äº†ä¸¤ç§æ–¹æ³•æ¥å®šä¹‰æ¶ˆæ¯è½¨è¿¹çš„Topicã€‚")]),ee,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/__puml/e43f0a1abf02d76ab7097deea0187b2d.svg#lake_card_v2=eyJ0eXBlIjoicHVtbCIsImNvZGUiOiJzZW5kZXIgLT4gYnJva2VyXG5icm9rZXIgLT4gZGIgOiBzYXZlIG1zZ1xuYnJva2VyIC0tPiBzZW5kZXIgOiBhY2svbmFja1xuYnJva2VyIC0-IHJlY2VpdmVyXG5yZWNlaXZlciAtLT4gYnJva2VyIDogYWNrL25hY2tcbmJyb2tlciAtPiBkYiA6IGRlbGV0ZSBtc2ciLCJ1cmwiOiJodHRwczovL2ludHJhbmV0cHJveHkuYWxpcGF5LmNvbS9za3lsYXJrL2xhcmsvX19wdW1sL2U0M2YwYTFhYmYwMmQ3NmFiNzA5N2RlZWEwMTg3YjJkLnN2ZyIsImlkIjoiYm1QU0IiLCJtYXJnaW4iOnsidG9wIjp0cnVlLCJib3R0b20iOnRydWV9LCJjYXJkIjoiZGlhZ3JhbSJ9",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t("##### æ•°æ®å¤‡ä»½å’Œæ•…éšœè½¬ç§» "),d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20441/1666871933931-97904c34-ab95-4778-9266-8a724d652213.png#clientId=uecce1891-4c1f-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=242&id=ue475ed04&margin=%5Bobject%20Object%5D&name=image.png&originHeight=483&originWidth=1037&originalType=binary&ratio=1&rotation=0&showTitle=false&size=59699&status=done&style=none&taskId=u85dd854e-7f54-4fe9-8d6c-addca350b18&title=&width=518.5",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),te,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20441/1666873658825-a41e31e0-f7dd-44e7-910c-f1a497841dd2.png#clientId=uecce1891-4c1f-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=153&id=ubf45f24c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=306&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&size=155906&status=done&style=none&taskId=ud3f002cb-af85-4049-9add-af69a19790c&title=&width=540",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" LogEndOffsetï¼šæ¯ä¸ªpartitionçš„logæœ€åä¸€æ¡Messageçš„ä½ç½®ã€‚ HighWatermarkï¼šå–æœ€å°LEOï¼Œconsumerèƒ½å¤Ÿçœ‹åˆ°çš„æ­¤partitionçš„ä½ç½®ã€‚")]),oe,de,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20441/1666874105184-a225b43d-bbc7-4cea-8f4f-cb05291be5c7.png#clientId=uecce1891-4c1f-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=432&id=ucafb9bc6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=863&originWidth=1500&originalType=binary&ratio=1&rotation=0&showTitle=false&size=189782&status=done&style=none&taskId=uac12c40c-6569-448a-8259-d74addcb9f2&title=&width=750",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20441/1666874115020-9996005b-36a2-4f0a-8051-824c5dd11908.png#clientId=uecce1891-4c1f-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=427&id=u415102c8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=853&originWidth=1500&originalType=binary&ratio=1&rotation=0&showTitle=false&size=183715&status=done&style=none&taskId=u05425056-2410-46d7-81fa-5cea881538c&title=&width=750",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),ae,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20441/1666874264460-8cbf0497-6148-4bea-bf87-49a800ef3d51.png#clientId=uecce1891-4c1f-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=264&id=u655e9fe8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=528&originWidth=646&originalType=binary&ratio=1&rotation=0&showTitle=false&size=113276&status=done&style=none&taskId=u89e9f7da-7792-4ca4-b578-3412e933ab6&title=&width=323",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),ie,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1666927224363-d5f358d6-4c94-4714-999a-d247de701a1b.png#clientId=ue9277cdc-a3a4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=357&id=u919d22b6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=357&originWidth=750&originalType=binary&ratio=1&rotation=0&showTitle=false&size=74259&status=done&style=none&taskId=u7baec6c9-8d01-4648-8a19-0f428f8915e&title=&width=750",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" åœ¨2.0çš„æ¨¡å‹ä¸­å°†normal message tableæ‹†åˆ†ä¸ºäº†å¤šä¸ªè¡¨ï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šç»„æˆäº†ä¸€ä¸ªç¯ï¼ŒæŒ‰ç…§æ—¶é—´è¿›è¡Œå†™å…¥è¡¨çš„åˆ‡æ¢ï¼Œå¹¶ä¸”å®šæœŸæ‰¹é‡çš„è¿›è¡Œè¿‡æœŸè¡¨ä¸­çš„æ•°æ®åˆ é™¤ã€‚æ¶ˆæ¯æŠ•é€’ä¹‹ååªä¼šè®°å½• checkpointï¼Œæ ‡è®°å“ªäº›æ¶ˆæ¯å·²ç»å¯ä»¥åˆ é™¤äº†ï¼Œè€Œä¸ä¼šçœŸæ­£æ‰§è¡Œ normal message table ä¸­çš„æ•°æ®åˆ é™¤ï¼Œä»è€Œé¿å…äº†é¢‘ç¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚å¯ä»¥ç®€å•çš„ç†è§£ä¸º2.0çš„æ¨¡å‹å†™å…¥å°±æ˜¯ä¸æ–­çš„ Append æ¶ˆæ¯ï¼ˆcheckpoint å¯ä»¥ç†è§£ä¸º offsetï¼‰ï¼ŒæŠ•é€’å°±æ˜¯ä¸æ–­çš„æ¨è¿›checkpointï¼Œåˆ é™¤æ˜¯æ‰¹é‡çš„å¯¹è¿‡æœŸçš„è¡¨ï¼ˆä¸å†è¿›è¡Œè¯»å†™ï¼‰è¿›è¡Œåˆ é™¤ã€‚")]),e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1666755832767-cae32c00-2718-4c29-b71e-1ef860b3eb73.png#clientId=u33216851-4002-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=606&id=u16911af2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=757&originWidth=1500&originalType=binary&ratio=1&rotation=0&showTitle=false&size=314793&status=done&style=none&taskId=u5872799b-7230-4dd4-b8c1-db8cc3cd08e&title=&width=1200",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" MsgBroker 2.0çš„è®¡ç®—æ¨¡å‹è®¾è®¡ä¸­é‡‡ç”¨äº†å…¨å¼‚æ­¥çš„æ¨¡å‹ï¼Œå¯¹å„ä¸ªå¼€é”€è¾ƒé«˜çš„æ“ä½œéƒ½åšäº†å¼‚æ­¥åŒ–ï¼Œæ¯”å¦‚msg-write-threadsï¼ˆæ¶ˆæ¯å†™å…¥çº¿ç¨‹æ± ï¼‰ä»…è´Ÿè´£æ¶ˆæ¯å†™å…¥æ—¶çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶ä¸å¤„ç†æŒä¹…åŒ–æ“ä½œã€‚æŒä¹…åŒ–æ“ä½œæ˜¯è€—æ—¶çš„ï¼Œç”±msg-flush-threadsæ‰¹é‡è¿›è¡ŒæŒä¹…åŒ–ï¼Œè¿™æ ·èƒ½ä½¿ msg-write-threads æ›´å¿«çš„å»å¤„ç†æ›´å¤šçš„å†™å…¥è¯·æ±‚ã€‚åŸºäºè¿™æ ·çš„è®¾è®¡ï¼Œèƒ½å¯¹å„ä¸ªé˜¶æ®µä¸åŒçš„çº¿ç¨‹æ± åšç²¾ç»†åŒ–çš„é…ç½®ï¼Œæå‡èµ„æºåˆ©ç”¨ç‡å’Œæ•´ä½“çš„æ€§èƒ½ã€‚")]),re,e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1667303564561-2f07e1f6-7659-42fd-af1c-e6158b2b660d.png#clientId=ub92ab98a-bea2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=540&id=u0afcf2aa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=540&originWidth=750&originalType=binary&ratio=1&rotation=0&showTitle=false&size=151090&status=done&style=none&taskId=u69fe3af1-8ba5-496f-b9cd-2e6f00ec9b2&title=&width=750",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),ce,e("p",null,[t("ä¸ºäº†æå‡æ•´ä½“çš„ååé‡ä¸æä¾›è·¨å‰¯æœ¬ç»„çš„é«˜å¯ç”¨èƒ½åŠ›ï¼ŒRocketMQ æœåŠ¡ç«¯ä¸€èˆ¬ä¼šä¸ºå•ä¸ª Topic åˆ›å»ºå¤šä¸ªé€»è¾‘åˆ†åŒºï¼Œå³åœ¨å¤šä¸ªå‰¯æœ¬ç»„ä¸Šå„è‡ªç»´æŠ¤éƒ¨åˆ†åˆ†åŒº ( Partition)ï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä¸ºé˜Ÿåˆ— (MessageQueue)ã€‚åŒä¸€ä¸ªå‰¯æœ¬ç»„ä¸ŠåŒä¸€ä¸ª Topic çš„é˜Ÿåˆ—æ•°ç›¸åŒå¹¶ä» 0 å¼€å§‹è¿ç»­ç¼–å·ï¼Œä¸åŒå‰¯æœ¬ç»„ä¸Šçš„ MessageQueue æ•°é‡å¯ä»¥ä¸åŒã€‚ "),d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1667211128802-1ebe1226-c430-4b6b-a95b-64ae84602146.png#clientId=u732f2838-f0ad-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=610&id=u13a63bf6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=610&originWidth=750&originalType=binary&ratio=1&rotation=0&showTitle=false&size=217091&status=done&style=none&taskId=u1a163547-d3c6-45a3-bacb-68c9b9605a3&title=&width=750",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" æ¯ä¸ªTopicåœ¨Brokerä¸Šä¼šåˆ’åˆ†æˆå‡ ä¸ªé€»è¾‘é˜Ÿåˆ—ï¼Œæ¯ä¸ªé€»è¾‘é˜Ÿåˆ—ä¿å­˜ä¸€éƒ¨åˆ†æ¶ˆæ¯æ•°æ®ã€‚ä»ä¸Šé¢æ¨¡å‹å¯ä»¥çœ‹å‡ºï¼Œè¦è§£å†³æ¶ˆè´¹å¹¶å‘ï¼Œå°±æ˜¯è¦åˆ©ç”¨Queue,ä¸€ä¸ªTopicå¯ä»¥åˆ†å‡ºæ›´å¤šçš„queue,æ¯ä¸€ä¸ªqueueå¯ä»¥å­˜æ”¾åœ¨ä¸åŒçš„ç¡¬ä»¶ä¸Šæ¥æé«˜å¹¶å‘ã€‚")]),ne,e("p",null,[t("åœ¨RocketMQä¸­æ¶ˆæ¯åˆ·ç›˜ä¸»è¦å¯ä»¥åˆ†ä¸ºåŒæ­¥åˆ·ç›˜å’Œå¼‚æ­¥åˆ·ç›˜ä¸¤ç§ã€‚ "),d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1667301973880-fbab5567-a642-42b6-8ead-7fa8e666e23d.png#clientId=ub92ab98a-bea2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=540&id=u5e5e4647&margin=%5Bobject%20Object%5D&name=image.png&originHeight=908&originWidth=583&originalType=binary&ratio=1&rotation=0&showTitle=false&size=48292&status=done&style=none&taskId=u1e3a47a0-19e3-4baa-b8f2-559591abd3e&title=&width=347",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" æ¶ˆæ¯å†™å…¥å†…å­˜çš„PAGECACHEåï¼Œç«‹åˆ»é€šçŸ¥åˆ·ç›˜çº¿ç¨‹åˆ·ç›˜ï¼Œç„¶åç­‰å¾…åˆ·ç›˜å®Œæˆï¼Œåˆ·ç›˜çº¿ç¨‹æ‰§è¡Œå®Œæˆåå”¤é†’ç­‰å¾…çš„çº¿ç¨‹ï¼Œè¿”å›æ¶ˆæ¯å†™æˆåŠŸçš„çŠ¶æ€ã€‚")]),e("p",null,[d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1667302024113-a2ca21dc-b78c-4e84-a005-2a84c19c0f75.png#clientId=ub92ab98a-bea2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=592&id=ud39bf6fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=906&originWidth=542&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49898&status=done&style=none&taskId=uc5830126-bfa6-4900-9880-40955d7f100&title=&width=354",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"}),t(" åœ¨è¿”å›å†™æˆåŠŸçŠ¶æ€æ—¶ï¼Œæ¶ˆæ¯å¯èƒ½åªæ˜¯è¢«å†™å…¥äº†å†…å­˜çš„PAGECACHEï¼Œå†™æ“ä½œçš„è¿”å›å¿«ï¼Œååé‡å¤§ï¼›å½“å†…å­˜é‡Œçš„æ¶ˆæ¯é‡ç§¯ç´¯åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œç»Ÿä¸€è§¦å‘å†™ç£ç›˜æ“ä½œï¼Œå¿«é€Ÿå†™å…¥ã€‚")]),le,e("p",null,[t("æ‰¹é‡æ¶ˆæ¯æ˜¯æŒ‡å°†å¤šæ¡å°çš„æ¶ˆæ¯åˆå¹¶æˆä¸€ä¸ªæ‰¹é‡æ¶ˆæ¯ï¼Œä¸€æ¬¡å‘é€å‡ºå»ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å‡å°‘ç½‘ç»œIOï¼Œæå‡ååé‡ã€‚ æ¯”å¦‚è¯´åŸæœ¬æˆ‘æœ‰ä¸‰æ¡æ¶ˆæ¯,å¦‚æœä¸‰æ¡æ¶ˆæ¯åˆ†ä¸‰æ¬¡å‘çš„è¯,ä¼šèµ°ä¸‰æ¬¡ç½‘ç»œIO,å¦‚æœæˆ‘ç»™ä¸‰æ¡æ¶ˆæ¯æ•´æˆä¸€èµ·å‘é€,è¿™æ ·å°±èµ°ä¸€æ¬¡ç½‘ç»œäº†ã€‚ "),d(o,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2022/png/20156646/1667304196521-865cb3ee-ab0d-4c62-90e5-7b6cf5bff2f4.png#clientId=ub92ab98a-bea2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=846&id=uec728440&margin=%5Bobject%20Object%5D&name=image.png&originHeight=846&originWidth=1402&originalType=binary&ratio=1&rotation=0&showTitle=false&size=220474&status=done&style=none&taskId=u2ccac6c3-73d4-409a-9418-120c3c6ec4c&title=&width=1402",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),se])}const ye=i(l,[["render",he]]);export{ke as __pageData,ye as default};
