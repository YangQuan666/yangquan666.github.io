import{_ as o,c as p,b as s,d as a,e as l,a as e,r as t,o as c}from"./app.8f2b2bef.js";const V=JSON.parse('{"title":"面向小白的软路由入门指南","description":"","frontmatter":{"title":"面向小白的软路由入门指南","date":"2022-04-30T00:00:00.000Z","excerpt":" OpenWrt是一款开源的路由器操作系统，能够把你们的路由器变成一台强大的网络工具。它的灵活性和可扩展性让用户能够定制路由器的功能，让路由器发挥最大的潜力。","tags":["OpenWrt","软路由","OpenClash","Docker","uu加速器","samba","aria"]},"headers":[{"level":2,"title":"为什么需要一台软路由","slug":"为什么需要一台软路由","link":"#为什么需要一台软路由","children":[]},{"level":2,"title":"软路由需要安装什么系统","slug":"软路由需要安装什么系统","link":"#软路由需要安装什么系统","children":[]},{"level":2,"title":"软件安装","slug":"软件安装","link":"#软件安装","children":[{"level":3,"title":"Docker","slug":"docker","link":"#docker","children":[]},{"level":3,"title":"Samba","slug":"samba","link":"#samba","children":[]}]}],"relativePath":"post/openwrt.md"}'),r={name:"post/openwrt.md"},i=e(`<h1 id="面向小白的软路由入门指南" tabindex="-1">面向小白的软路由入门指南 <a class="header-anchor" href="#面向小白的软路由入门指南" aria-hidden="true">#</a></h1><p>演示的软路由型号为友善R4S</p><h2 id="为什么需要一台软路由" tabindex="-1">为什么需要一台软路由 <a class="header-anchor" href="#为什么需要一台软路由" aria-hidden="true">#</a></h2><h2 id="软路由需要安装什么系统" tabindex="-1">软路由需要安装什么系统 <a class="header-anchor" href="#软路由需要安装什么系统" aria-hidden="true">#</a></h2><h2 id="软件安装" tabindex="-1">软件安装 <a class="header-anchor" href="#软件安装" aria-hidden="true">#</a></h2><h3 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h3><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dockerd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span></span>
<span class="line"></span></code></pre></div><h4 id="管理页面" tabindex="-1">管理页面 <a class="header-anchor" href="#管理页面" aria-hidden="true">#</a></h4><p><strong>需要打开防火墙转发，Luci &gt; 网络 &gt; 防火墙 &gt; 转发：接受</strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#创建一个卷，来供管理工具存储数据</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">volume</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer_data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#拉取Docker镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer/portainer-ce:linux-arm64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#运行Docker容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8000</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">8000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9443</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">9443</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--restart=always</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/run/docker.sock:/var/run/docker.sock</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer_data:/data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer/portainer-ce:linux-arm64</span></span>
<span class="line"></span></code></pre></div><p>访问地址：<code>https://192.168.1.1:9443</code></p><p>创建用户名和密码</p><h4 id="运行debian容器" tabindex="-1">运行Debian容器 <a class="header-anchor" href="#运行debian容器" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span></code></pre></div><h3 id="samba" tabindex="-1">Samba <a class="header-anchor" href="#samba" aria-hidden="true">#</a></h3><h4 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-hidden="true">#</a></h4><p>Samba 是一组不同功能程序组成的应用集合，它能让 Linux 服务器实现文件服务器、身份授权和认证、名称解析和打印服务等功能。 Samba分为服务端和客户端，本次我们打算将软路由上作为文件共享中心，因此需要在软路由上安装Samba的服务端。客户端的话，因为现代的操作系统默认都支持SMB协议，所以只需要稍加配置即可启用</p><h4 id="安装samba" tabindex="-1">安装Samba <a class="header-anchor" href="#安装samba" aria-hidden="true">#</a></h4>`,19),d=s("code",null,"System",-1),C=s("code",null,"Software",-1),h=s("code",null,"samba4-server",-1),y=s("code",null,"luci-app-samba4",-1),A=e(`<h4 id="添加用户" tabindex="-1">添加用户 <a class="header-anchor" href="#添加用户" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadow-useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 安装&#39;useradd&#39;，目的是为了创建用户</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 新建一个用户,名字叫&#39;samba&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">smbpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#为用户samba创建密码，看到&#39;Added user samba.&#39;表示用户成功添加到samba中了</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/samba</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 创建一个文件夹用于samba共享，可以自己随意设置</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-R</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba:samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/samba</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#使用户samba获得文件夹权限</span></span>
<span class="line"></span></code></pre></div><h4 id="软件配置" tabindex="-1">软件配置 <a class="header-anchor" href="#软件配置" aria-hidden="true">#</a></h4>`,3),D=s("li",null,[a("进入Samba配置页面： "),s("code",null,"Services"),a(" -> "),s("code",null,"Network Shares")],-1),u=s("code",null,"Path",-1),_=s("code",null,"/opt/samba",-1),m=s("h4",{id:"其他平台访问方式",tabindex:"-1"},[a("其他平台访问方式 "),s("a",{class:"header-anchor",href:"#其他平台访问方式","aria-hidden":"true"},"#")],-1),b=s("code",null,"SMB 1.0/CIFS 文件共享支持",-1),g=s("code",null,"SMB直通",-1),E=s("li",null,[a("打开文件夹，访问samba服务地址，例如 "),s("code",null,"smb://192.168.1.1"),a("，然后回车")],-1),f=s("li",null,"打开finder",-1),x=s("li",null,[a("按下快捷键 "),s("code",null,"⌘"),a(" + "),s("code",null,"K"),a(" 打开连接")],-1),k=s("li",null,[a("输入samba的服务器地址，例如 "),s("code",null,"smb://192.168.1.1"),a("，点击连接")],-1),B=s("li",null,[a("输入samba的服务器地址，例如 "),s("code",null,"smb://192.168.1.1"),a("，点击连接")],-1);function F(S,w,v,T,z,N){const n=t("q-img");return c(),p("div",null,[i,s("p",null,[a("在 "),d,a(" -> "),C,a(" 中安装samba的服务端 "),h,a(" ,以及可视化配置页面 "),y,l(n,{src:"/post/openwrt/openwrt_install_samba.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),A,s("ol",null,[D,s("li",null,[a("共享目录，注意 "),u,a(" 一定要选之前创建的，例如我的就是 "),_,a("，其他的可以参照我的截图来 "),l(n,{src:"/post/openwrt/shared_directories.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),s("li",null,[a("兼容苹果设备访问(建议打开) "),l(n,{src:"/post/openwrt/macOS_compatible.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])]),m,s("ol",null,[s("li",null,[a("Windows "),s("ol",null,[s("li",null,[a("在启用或关闭windows功能中打开 "),b,a(" 和 "),g,l(n,{src:"/post/openwrt/windows_samba_enable.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),E,s("li",null,[a("按照提示输入用户名和密码即可成功连接 "),l(n,{src:"/post/openwrt/windows_samba.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])])]),s("li",null,[a("Mac "),s("ol",null,[f,x,k,s("li",null,[a("按照提示输入用户名和密码即可成功连接 "),l(n,{src:"/post/openwrt/mac_finder_samba.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])])]),s("li",null,[a("iPhone/iPad "),s("ol",null,[s("li",null,[a("打开文件 -> 浏览，然后点击右上角 更多 -> 连接服务器 "),l(n,{src:"/post/openwrt/iOS_samba_connect.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})]),B,s("li",null,[a("按照提示输入用户名和密码即可成功连接 "),l(n,{src:"/post/openwrt/iOS_samba_display.png",alt:"",style:{"max-height":"400px"},loading:"lazy",fit:"contain"})])])])])])}const O=o(r,[["render",F]]);export{V as __pageData,O as default};
