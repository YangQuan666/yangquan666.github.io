<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面向小白的软路由入门指南 | 萨科的魔术盒</title>
    <meta name="description" content="YangQuan的个人博客网站">
    <link rel="preload stylesheet" href="/assets/style.d4918880.css" as="style">
    <script type="module" src="/assets/app.31bf5eb9.js"></script>
    <link rel="modulepreload" href="/assets/chunks/framework.8a3c402f.js">
  <link rel="modulepreload" href="/assets/post_openwrt.md.ff648a56.lean.js">
  <meta name="viewport" content="user-scalable=0, initial-scale=1, maximum-scale=1, width=device-width">
  <meta name="google-site-verification" content="RAVRlhHFJKHyrrg75VIxZPLEm6Vy7g846tY7WCmvQmA">
  <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <link rel="me" href="https://mastodon.social/@Kourtsis">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="q-layout q-layout--standard" style="min-height:0px;" tabindex="-1"><!----><!----><header class="q-header q-layout__section--marginal fixed-top" style=""><div class="q-toolbar row no-wrap items-center" role="toolbar" drawer="false"><button class="q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round q-btn--actionable q-focusable q-hoverable" style="" tabindex="0" type="button"><span class="q-focus-helper"></span><span class="q-btn__content text-center col items-center q-anchor--skip justify-center row"><i class="q-icon notranslate material-icons" style="" aria-hidden="true" role="img">menu</i></span></button><div class="q-toolbar__title ellipsis col-shrink row items-center no-wrap"><div class="q-avatar" style=""><div class="q-avatar__content row flex-center overflow-hidden" style=""><img src="https://cdn.quasar.dev/logo-v2/svg/logo.svg" alt="logo"></div></div><span class="q-ml-sm">萨科的魔术盒</span></div><div class="q-space"></div><div class="search-field search-closed"><div class="ais-InstantSearch"><!----></div></div><div class="q-space gt-sm"></div><!----></div><!----><div class="q-layout__shadow absolute-full overflow-hidden no-pointer-events"></div><!----></header><div class="q-drawer-container"><div class="fullscreen q-drawer__backdrop hidden" style="background-color:rgba(0,0,0,0);" aria-hidden="true"></div><aside class="q-drawer q-drawer--left q-layout--prevent-focus fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding" style="width:300px;transform:translateX(-300px);"><div class="q-drawer__content fit scroll"><div class="q-scrollarea fit"><div class="q-scrollarea__container scroll relative-position fit hide-scrollbar"><div class="q-scrollarea__content absolute" style=""><!----><div class="q-img q-img--menu" style="height:300px;" role="img"><div style="padding-bottom:56.25%;"></div><div class="q-img__content absolute-full q-anchor--skip"><div class="absolute-bottom bg-transparent" style="text-align:center;"><div class="q-avatar q-mb-sm" style="font-size:150px;"><div class="q-avatar__content row flex-center overflow-hidden" style=""><img src="/avatar.webp" alt="avatar"></div></div><div class="q-card__section q-card__section--vert">一个爱折腾的程序员 )=￣ω￣=)</div><div class="row"><!--[--><div class="col" style="text-align:center;"><a class="q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round q-btn--actionable q-focusable q-hoverable" style="" tabindex="0" href="https://github.com/YangQuan666"><span class="q-focus-helper"></span><span class="q-btn__content text-center col items-center q-anchor--skip justify-center row"><span class="q-icon" style="" aria-hidden="true" role="img"><svg viewBox="0 0 16 16"><path style="" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></span></span></a></div><div class="col" style="text-align:center;"><a class="q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--round q-btn--actionable q-focusable q-hoverable" style="" tabindex="0" href="https://discord.gg/J8BVvnsWeB"><span class="q-focus-helper"></span><span class="q-btn__content text-center col items-center q-anchor--skip justify-center row"><span class="q-icon" style="" aria-hidden="true" role="img"><svg viewBox="0 0 16 16"><path style="" d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path></svg></span></span></a></div><!--]--></div></div></div></div><!--[--><div class="q-expansion-item q-item-type q-expansion-item--expanded q-expansion-item--standard" padding><div class="q-expansion-item__container relative-position"><div class="q-item q-item-type row no-wrap q-item--clickable q-link cursor-pointer q-focusable q-hoverable" style="" role="button" tabindex="0" aria-expanded="true" aria-controls="16111b8b-c0fd-49c1-9586-61da72d62eb2" aria-label="Collapse &quot;主页&quot;"><div class="q-focus-helper" tabindex="-1"></div><div class="q-item__section column q-item__section--side justify-center q-item__section--avatar"><i class="q-icon notranslate material-icons" style="" aria-hidden="true" role="presentation">home</i></div><div class="q-item__section column q-item__section--main justify-center"><div style="" class="q-item__label">主页</div><!----></div></div><div class="q-expansion-item__content relative-position" style="" id="16111b8b-c0fd-49c1-9586-61da72d62eb2"><!--[--><!--]--></div></div></div><div class="q-expansion-item q-item-type q-expansion-item--expanded q-expansion-item--standard" padding><div class="q-expansion-item__container relative-position"><div class="q-item q-item-type row no-wrap q-item--clickable q-link cursor-pointer q-focusable q-hoverable" style="" role="button" tabindex="0" aria-expanded="true" aria-controls="fae0cb27-8694-4525-9597-2bd35d9a90ca" aria-label="Collapse &quot;小游戏&quot;"><div class="q-focus-helper" tabindex="-1"></div><div class="q-item__section column q-item__section--side justify-center q-item__section--avatar"><i class="q-icon notranslate material-icons" style="" aria-hidden="true" role="presentation">smart_toy</i></div><div class="q-item__section column q-item__section--main justify-center"><div style="" class="q-item__label">小游戏</div><!----></div><div class="q-item__section column q-item__section--side justify-center q-focusable relative-position cursor-pointer"><i class="q-icon notranslate material-icons q-expansion-item__toggle-icon q-expansion-item__toggle-icon--rotated" style="" aria-hidden="true" role="presentation">keyboard_arrow_down</i></div></div><div class="q-expansion-item__content relative-position" style="" id="fae0cb27-8694-4525-9597-2bd35d9a90ca"><!--[--><div class="q-item q-item-type row no-wrap q-item--clickable q-link cursor-pointer q-focusable q-hoverable" style="" role="listitem" tabindex="0"><div class="q-focus-helper" tabindex="-1"></div><div class="q-item__section column q-item__section--side justify-center q-item__section--avatar"></div><div class="q-item__section column q-item__section--main justify-center">2048</div><div class="q-item__section column q-item__section--side justify-center q-item__section--avatar"><i class="q-icon notranslate material-icons" style="" aria-hidden="true" role="presentation">smart_toy</i></div></div><!--]--></div></div></div><!--]--></div><!----></div><!----><div class="q-scrollarea__bar q-scrollarea__bar--v absolute-right q-scrollarea__bar--invisible" style="" aria-hidden="true"></div><div class="q-scrollarea__bar q-scrollarea__bar--h absolute-bottom q-scrollarea__bar--invisible" style="" aria-hidden="true"></div><div class="q-scrollarea__thumb q-scrollarea__thumb--v absolute-right q-scrollarea__thumb--invisible" style="top:0px;height:0px;" aria-hidden="true"></div><div class="q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom q-scrollarea__thumb--invisible" style="left:0px;width:0px;" aria-hidden="true"></div></div></div></aside></div><div class="q-page-container" style="padding-top:50px;"><main class="q-page q-layout-padding" style="min-height:calc(100vh - 50px);"><!--[--><div class="q-img q-img--menu" style="height:400px;" role="img" aria-label="background"><div style="padding-bottom:56.25%;"></div><div class="q-img__content absolute-full q-anchor--skip"><h3 class="absolute-full flex flex-center"> Talk is cheap. Show me the code. </h3></div></div><div class="row animate__animated animate__fadeIn"><div class="col-12 col-sm-10 offset-sm-1"><div class="q-card__actions justify-start q-card__actions--horiz row"><i class="q-icon notranslate material-icons" style="" aria-hidden="true" role="presentation">schedule</i> 预计阅读分钟 <div class="q-space"></div><i class="q-icon notranslate material-icons" style="" aria-hidden="true" role="presentation">update</i> 2023-05-07更新 </div><div style="position:relative;" class="markdown-body"><div><h1 id="面向小白的软路由入门指南" tabindex="-1">面向小白的软路由入门指南 <a class="header-anchor" href="#面向小白的软路由入门指南" aria-label="Permalink to &quot;面向小白的软路由入门指南&quot;">​</a></h1><blockquote><p>本文演示的软路由型号为友善R4S，其使用ARM v8芯片，相比传统的X86芯片能耗更低，更适合软路由系统</p></blockquote><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><p>类似于计算机有软件和硬件的概念，在路由器领域，我们习惯把常用的可以发射Wi-Fi信号的设备称为“硬路由”，而把没有无线功能，但是运行着路由系统的设备称为“软路由”</p><ul><li>硬路由的特点：无线信号强，稳定性高但硬件昂贵</li><li>软路由的特点：软件丰富，可玩性高，成本较低</li></ul><p>软路由和硬路由不是相互代替的，反而是相辅相成的关系，有条件的家庭可以两者都选购</p><h2 id="网络拓扑图" tabindex="-1">网络拓扑图 <a class="header-anchor" href="#网络拓扑图" aria-label="Permalink to &quot;网络拓扑图&quot;">​</a></h2><blockquote><p>常见的家庭网络拓扑图，可以看到软路由的位置仅次于光猫，在网络拓扑图中具有较高的地位，正因如此，软路由才可以实现一些硬路由没法实现的高级玩法</p></blockquote><p><div><img src="/post/openwrt/topology.png" alt="" style="max-height:400px;" loading="lazy"></div></p><h2 id="开始之前" tabindex="-1">开始之前 <a class="header-anchor" href="#开始之前" aria-label="Permalink to &quot;开始之前&quot;">​</a></h2><blockquote><p>OpenWrt 是一款基于 Linux 的开源软路由系统，专为嵌入式设备（如路由器、网关、无线接入点等）设计。它提供丰富的网络功能和插件，支持多种硬件平台，允许用户自定义配置和扩展功能，从而实现灵活、定制化的路由器管理和网络服务。 OpenWrt 提供了一套完整的路由器操作系统，包括了 Linux 内核、网络管理工具、Web 界面、软件包管理器（opkg）等，用户可以通过 SSH 或 Web 界面进行配置和管理。OpenWrt 具有强大的路由和网络功能，如防火墙、端口转发、虚拟专网（VPN）、负载均衡、QoS（服务质量）、无线网络管理等，同时还支持大量的第三方软件包，如 DNS 服务器、VPN 服务器、网络存储（NAS）等，可以根据需要进行安装和配置。</p></blockquote><p><div><img src="/post/openwrt/openwrt_logo.png" alt="" style="max-height:400px;" loading="lazy"></div></p><h3 id="下载镜像" tabindex="-1">下载镜像 <a class="header-anchor" href="#下载镜像" aria-label="Permalink to &quot;下载镜像&quot;">​</a></h3><table><thead><tr><th>镜像地址</th><th>特点</th></tr></thead><tbody><tr><td><a href="https://firmware-selector.openwrt.org" target="_blank" rel="noreferrer">OpenWrt官方镜像</a>「推荐」</td><td>优点：最为纯净，稳定性也最好<br>缺点：默认存储空间只有500M，而且不能扩展</td></tr><tr><td><a href="https://wiki.friendlyelec.com/wiki/index.php/NanoPi_R4S#Download_Image_Files" target="_blank" rel="noreferrer">友善官方镜像</a></td><td>优点：较为稳定，自带docker<br>缺点：系统太过臃肿，自定义性差</td></tr><tr><td><a href="https://supes.top/" target="_blank" rel="noreferrer">supes.top</a></td><td>优点：由kiddin9大佬贴心定制，适合小白用户<br>缺点：比起官方的稳定性差</td></tr></tbody></table><p>当然如果你熟悉linux系统的话，也可以自己下载OpenWrt源代码后来编译生成固件，这就不在本篇文章的范围内了</p><h3 id="软件安装" tabindex="-1">软件安装 <a class="header-anchor" href="#软件安装" aria-label="Permalink to &quot;软件安装&quot;">​</a></h3><blockquote><p>以下三种方式任选一种即可</p><p>luci软件安装后在「Service」菜单中可找到</p></blockquote><h4 id="官方仓库" tabindex="-1">官方仓库 <a class="header-anchor" href="#官方仓库" aria-label="Permalink to &quot;官方仓库&quot;">​</a></h4><ol><li>登录openwrt后台web界面</li><li>访问：<strong>System</strong> &gt; <strong>Software</strong> &gt; <strong>Update lists</strong>，更新软件源</li><li>在上方的红框中输入软件课程，然后在中意的软件右侧点击「Install」 <div><img src="/post/openwrt/luci_install.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h4 id="手动上传安装包" tabindex="-1">手动上传安装包 <a class="header-anchor" href="#手动上传安装包" aria-label="Permalink to &quot;手动上传安装包&quot;">​</a></h4><p>ipk文件仓库列表：</p><table><thead><tr><th>名称</th><th>仓库地址</th></tr></thead><tbody><tr><td>openwrt官方仓库</td><td><a href="https://downloads.openwrt.org/releases/" target="_blank" rel="noreferrer">https://downloads.openwrt.org/releases/</a></td></tr><tr><td>kiddin9大佬的仓库</td><td><a href="https://op.supes.top/packages/" target="_blank" rel="noreferrer">https://op.supes.top/packages/</a></td></tr></tbody></table><ol><li>下载好需要的<code>.ipk</code>安装包文件</li><li>web页面访问：<strong>System</strong> &gt; <strong>Software</strong> &gt; <strong>Upload Package</strong>，上传<code>.ipk</code>安装包 <div><img src="/post/openwrt/upload_ipk.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h4 id="命令行安装" tabindex="-1">命令行安装 <a class="header-anchor" href="#命令行安装" aria-label="Permalink to &quot;命令行安装&quot;">​</a></h4><ol><li>使用ssh连接到openwrt</li><li>执行如下的命令<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#更新源</span></span>
<span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#搜索安装包</span></span>
<span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{package_name}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#安装</span></span>
<span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{package_name}</span></span></code></pre></div></li></ol><h3 id="扩容分区" tabindex="-1">扩容分区 <a class="header-anchor" href="#扩容分区" aria-label="Permalink to &quot;扩容分区&quot;">​</a></h3><blockquote><p>OpenWrt默认的系统分区只有100M左右，如果你的SD卡空间较大，建议进行扩容</p><p>⚠️以下命令只能在Linux环境下运行</p></blockquote><ol><li>执行下面的命令，对镜像包进行分区扩容<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 解压下载好的镜像包</span></span>
<span class="line"><span style="color:#FFCB6B;">gzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-kdq</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openwrt-22.03.4-rockchip-armv8-friendlyarm_nanopi-r4s-squashfs-sysupgrade.img.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重命名文件</span></span>
<span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openwrt-22.03.4-rockchip-armv8-friendlyarm_nanopi-r4s-squashfs-sysupgrade.img</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">op.img</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#扩容8000M，这里因为我的SD卡总容量为32G，分出8G绰绰有余</span></span>
<span class="line"><span style="color:#FFCB6B;">dd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">if=/dev/zero</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bs=</span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;">M</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">count=</span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#C3E88D;">op.img</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#进入分区工具</span></span>
<span class="line"><span style="color:#FFCB6B;">parted</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">op.img</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#查看分区情况</span></span>
<span class="line"><span style="color:#82AAFF;">print</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#扩容分区2</span></span>
<span class="line"><span style="color:#FFCB6B;">resizepart</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span><span style="color:#C3E88D;">%</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#再次查看</span></span>
<span class="line"><span style="color:#82AAFF;">print</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#退出分区工具</span></span>
<span class="line"><span style="color:#FFCB6B;">quit</span></span></code></pre></div></li><li>分区之后的数据类似下图 <div><img src="/post/openwrt/img_partition.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>使用u盘工具刷入镜像包，如: <a href="https://rufus.ie/zh/" target="_blank" rel="noreferrer">Rufus</a>, <a href="https://www.balena.io/etcher" target="_blank" rel="noreferrer">Etcher</a></li></ol><h3 id="磁盘分区" tabindex="-1">磁盘分区 <a class="header-anchor" href="#磁盘分区" aria-label="Permalink to &quot;磁盘分区&quot;">​</a></h3><ol><li>搜索下载<code>luci-app-diskman.ipk</code></li><li>进入 <strong>System</strong> &gt; <strong>Disk Man</strong> &gt; <strong>Edit</strong>,（如页面报错，则需要安装<code>luci-compat</code>） <div><img src="/post/openwrt/diskman_edit.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>填写分区起始、结束位置（一般默认就行），点击「New」，完成分区新建 <div><img src="/post/openwrt/diskman_new.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>格式化分区为<strong>ext4</strong>格式</li><li><strong>System</strong> &gt; <strong>Software</strong>，搜索并下载<code>block-mount</code></li><li>进入 <strong>System</strong> &gt; <strong>Mount Points</strong>，找到新建的分区，然后<strong>Edit</strong> &gt; <strong>Enable</strong> &gt; <strong>Save&amp;Apply</strong><div><img src="/post/openwrt/partition_enable.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h2 id="推荐软件" tabindex="-1">推荐软件 <a class="header-anchor" href="#推荐软件" aria-label="Permalink to &quot;推荐软件&quot;">​</a></h2><h3 id="argon主题" tabindex="-1">Argon主题 <a class="header-anchor" href="#argon主题" aria-label="Permalink to &quot;Argon主题&quot;">​</a></h3><blockquote><p>OpenWrt下的高颜值主题</p></blockquote><h4 id="安装清单" tabindex="-1">安装清单 <a class="header-anchor" href="#安装清单" aria-label="Permalink to &quot;安装清单&quot;">​</a></h4><ul><li><code>luci-theme-argon</code>：argon主题</li></ul><h4 id="启用" tabindex="-1">启用 <a class="header-anchor" href="#启用" aria-label="Permalink to &quot;启用&quot;">​</a></h4><ol start="2"><li><strong>System</strong> &gt; <strong>System</strong> &gt; <strong>Language and Style</strong>，选择Argon主题并保存 <div><img src="/post/openwrt/argon_enable.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h3 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h3><h4 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dockerd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span></span></code></pre></div><h4 id="管理页面" tabindex="-1">管理页面 <a class="header-anchor" href="#管理页面" aria-label="Permalink to &quot;管理页面&quot;">​</a></h4><p><strong>需要打开防火墙转发，Luci &gt; 网络 &gt; 防火墙 &gt; 转发：接受</strong></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#创建一个卷，来供管理工具存储数据</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">volume</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer_data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#拉取Docker镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer/portainer-ce:linux-arm64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#运行Docker容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8000</span><span style="color:#C3E88D;">:8000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9443</span><span style="color:#C3E88D;">:9443</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--restart=always</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/run/docker.sock:/var/run/docker.sock</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer_data:/data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">portainer/portainer-ce:linux-arm64</span></span></code></pre></div><p>访问地址：<code>https://192.168.1.1:9443</code></p><p>创建用户名和密码</p><h4 id="运行容器" tabindex="-1">运行容器 <a class="header-anchor" href="#运行容器" aria-label="Permalink to &quot;运行容器&quot;">​</a></h4><h5 id="debian" tabindex="-1">Debian <a class="header-anchor" href="#debian" aria-label="Permalink to &quot;Debian&quot;">​</a></h5><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">debian</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span></code></pre></div><h5 id="mariadb" tabindex="-1">MariaDB <a class="header-anchor" href="#mariadb" aria-label="Permalink to &quot;MariaDB&quot;">​</a></h5><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/my/own/datadir:/var/lib/mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MARIADB_ROOT_PASSWORD=my-secret-pw</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mariadb:latest</span></span></code></pre></div><h5 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-label="Permalink to &quot;Redis&quot;">​</a></h5><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/myredis/conf:/usr/local/etc/redis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">myredis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/etc/redis/redis.conf</span></span></code></pre></div><h3 id="samba" tabindex="-1">Samba <a class="header-anchor" href="#samba" aria-label="Permalink to &quot;Samba&quot;">​</a></h3><blockquote><p>Samba 是一组不同功能程序组成的应用集合，它能让 Linux 服务器实现文件服务器、身份授权和认证、名称解析和打印服务等功能。</p><p>Samba分为服务端和客户端，本次我们打算将软路由上作为文件共享中心，因此需要在软路由上安装Samba的服务端。客户端的话，因为现代的操作系统默认都支持SMB协议，所以只需要稍加配置即可启用</p></blockquote><h4 id="安装-1" tabindex="-1">安装 <a class="header-anchor" href="#安装-1" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ul><li><code>samba4-server</code>：samba的服务端</li><li><code>luci-app-samba4</code>：可视化配置页面</li></ul><p><div><img src="/post/openwrt/openwrt_install_samba.png" alt="" style="max-height:400px;" loading="lazy"></div></p><h4 id="添加用户" tabindex="-1">添加用户 <a class="header-anchor" href="#添加用户" aria-label="Permalink to &quot;添加用户&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#安装&#39;useradd&#39;，目的是为了创建用户</span></span>
<span class="line"><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shadow-useradd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#新建一个用户,名字叫&#39;samba&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#为用户samba创建密码，看到&#39;Added user samba.&#39;表示用户成功添加到samba中了</span></span>
<span class="line"><span style="color:#FFCB6B;">smbpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#创建一个文件夹用于samba共享，可以自己随意设置</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/samba</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#使用户samba获得文件夹权限</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-R</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba:samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/samba</span></span></code></pre></div><h4 id="软件配置" tabindex="-1">软件配置 <a class="header-anchor" href="#软件配置" aria-label="Permalink to &quot;软件配置&quot;">​</a></h4><ol><li>进入Samba配置页面： <strong>Services</strong> &gt; <strong>Network Shares</strong></li><li>共享目录，注意 <code>Path</code> 一定要选之前创建的，例如我的就是 <code>/opt/samba</code>，其他的可以参照我的截图来 <div><img src="/post/openwrt/shared_directories.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>兼容苹果设备访问(建议打开) <div><img src="/post/openwrt/macOS_compatible.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h4 id="其他平台访问方式" tabindex="-1">其他平台访问方式 <a class="header-anchor" href="#其他平台访问方式" aria-label="Permalink to &quot;其他平台访问方式&quot;">​</a></h4><h5 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h5><ol><li>在启用或关闭windows功能中打开 <code>SMB 1.0/CIFS 文件共享支持</code> 和 <code>SMB直通</code><div><img src="/post/openwrt/windows_samba_enable.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>打开文件资源管理器，右键「此电脑」-&gt; 「映射网络驱动器」 <div><img src="/post/openwrt/windows_add_driver.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>文件夹填入<code>\\192.168.1.1\samba</code>，然后回车</li><li>按照提示输入用户名和密码即可成功连接 <div><img src="/post/openwrt/windows_samba.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h5 id="mac" tabindex="-1">Mac <a class="header-anchor" href="#mac" aria-label="Permalink to &quot;Mac&quot;">​</a></h5><ol><li>打开Finder</li><li>按下快捷键 <code>⌘ + k</code> 打开连接</li><li>输入samba的服务器地址，例如 <code>smb://192.168.1.1</code>，点击连接</li><li>按照提示输入用户名和密码即可成功连接 <div><img src="/post/openwrt/mac_finder_samba.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h5 id="iphone-ipad" tabindex="-1">iPhone/iPad <a class="header-anchor" href="#iphone-ipad" aria-label="Permalink to &quot;iPhone/iPad&quot;">​</a></h5><ol><li>打开文件 -&gt; 浏览，然后点击右上角 更多 -&gt; 连接服务器 <div><img src="/post/openwrt/iOS_samba_connect.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>输入samba的服务器地址，例如 <code>smb://192.168.1.1</code>，点击连接</li><li>按照提示输入用户名和密码即可成功连接 <div><img src="/post/openwrt/iOS_samba_display.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h3 id="aria2" tabindex="-1">Aria2 <a class="header-anchor" href="#aria2" aria-label="Permalink to &quot;Aria2&quot;">​</a></h3><blockquote><p>Linux 平台下知名的下载工具</p></blockquote><h4 id="安装清单-1" tabindex="-1">安装清单 <a class="header-anchor" href="#安装清单-1" aria-label="Permalink to &quot;安装清单&quot;">​</a></h4><ul><li><code>aria2</code>：aria2内核</li><li><code>luci-app-aria2</code>：luci界面</li><li><code>webui-aria2</code>：web界面</li></ul><h4 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h4><ol><li>在 <strong>Basic Options</strong> 中开启Aria服务，并设置下载目录，这里我是下载到samba路径下方便分享 <div><img src="/post/openwrt/aria_enable.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>在 RPC Options 生成RPC令牌 <div><img src="/post/openwrt/aria2_rpc.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>返回 Basic Options ，点击上方的“WEBUI-ARIA2”按钮 <ol><li>设置 &gt; 连接设置中填写aria2服务的ip、端口、rpc密钥 <div><img src="/post/openwrt/aria2_webui.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>保存连接配置</li><li>现在可以试试下载一个url文件或者BT种子</li></ol></li></ol><h3 id="网络唤醒" tabindex="-1">网络唤醒 <a class="header-anchor" href="#网络唤醒" aria-label="Permalink to &quot;网络唤醒&quot;">​</a></h3><blockquote><p>教你如何使用Siri唤醒你的PC电脑</p></blockquote><h4 id="安装清单-2" tabindex="-1">安装清单 <a class="header-anchor" href="#安装清单-2" aria-label="Permalink to &quot;安装清单&quot;">​</a></h4><ul><li><code>luci-app-wol</code> (会自动安装<code>etherwake</code>等依赖)</li></ul><h4 id="pc设置" tabindex="-1">PC设置 <a class="header-anchor" href="#pc设置" aria-label="Permalink to &quot;PC设置&quot;">​</a></h4><ol><li>在 Windows 10 中，运行 &gt; ncpa.cpl 打开「网络连接」设置，然后找到当前在使用的有线网卡，右键点击「属性」： <div><img src="/post/openwrt/pc_etherwake.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>然后选择「配置」： <div><img src="/post/openwrt/pc_etherwake2.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>在随后弹出的面板中找到「电源管理」，勾选「允许此设备唤醒计算机」以及「只允许幻数据包唤醒计算机」 <div><img src="/post/openwrt/pc_etherwake3.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h4 id="主板设置" tabindex="-1">主板设置 <a class="header-anchor" href="#主板设置" aria-label="Permalink to &quot;主板设置&quot;">​</a></h4><p>除此之外，我们可能还需要启用适当的 BIOS 设置才能使用 WoL 功能，具体方法视厂商而定，进入 BIOS 后注意选项附加的说明即可，可以参考的关键词包括：</p><ul><li>Network Stack</li><li>Automatic Power On</li><li>Wake on LAN/WLAN</li><li>Power Management</li><li>Power On by Onboard LAN</li><li>Power On by PCI-E Devices</li></ul><h4 id="测试唤醒" tabindex="-1">测试唤醒 <a class="header-anchor" href="#测试唤醒" aria-label="Permalink to &quot;测试唤醒&quot;">​</a></h4><ol><li><strong>Service</strong> &gt; <strong>Wake On LAN</strong></li><li>选择网口和待唤醒的主机IP，点击「WAKE UP HOST」</li></ol><h4 id="ios" tabindex="-1">iOS <a class="header-anchor" href="#ios" aria-label="Permalink to &quot;iOS&quot;">​</a></h4><ol><li><strong>捷径</strong> &gt; <strong>新建快捷指令</strong> &gt; <strong>添加操作</strong>，选择「通过SSH运行脚本」</li><li>填写脚本代码: <code>etherwake -D ${需要唤醒的MAC地址}</code></li><li>填写ssh连接信息 <div><img src="/post/openwrt/wakeup_shortcut.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>之后需要唤醒电脑时：「嘿Siri，唤醒电脑」</li></ol><h3 id="openclash" tabindex="-1"><a href="https://github.com/vernesong/OpenClash" target="_blank" rel="noreferrer">OpenClash</a> <a class="header-anchor" href="#openclash" aria-label="Permalink to &quot;[OpenClash](https://github.com/vernesong/OpenClash)&quot;">​</a></h3><blockquote><p>一个可运行在 OpenWrt 上的 Clash 客户端，兼容 Shadowsocks、ShadowsocksR、Vmess、Trojan、Snell 等协议</p></blockquote><h4 id="安装-2" tabindex="-1">安装 <a class="header-anchor" href="#安装-2" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ol><li>登录路由器后台，比如 <code>ssh root@192.168.1.1</code></li><li>下载安装前依赖：<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#如果是新的nftables</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">coreutils-nohup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dnsmasq-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ipset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ip-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap-bin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby-yaml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-tun</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-inet-diag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-nft-tproxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-compat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#如果是旧的iptables</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">opkg</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">coreutils-nohup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iptables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dnsmasq-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ca-certificates</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ipset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ip-full</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iptables-mod-tproxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">iptables-mod-extra</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">libcap-bin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ruby-yaml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-tun</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kmod-inet-diag</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-compat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luci-base</span></span></code></pre></div></li><li>在<a href="https://github.com/vernesong/OpenClash/releases" target="_blank" rel="noreferrer">OpenClash Release页面</a>找到最新版本的ipk安装包，复制连接地址 下载安装包: <code>wget https://github.com/vernesong/OpenClash/releases/download/v0.45.110-beta/luci-app-openclash_0.45.110-beta_all.ipk -O luci-app-openclash.ipk</code></li><li>安装OpenClash: <code>opkg install ./luci-app-openclash.ipk</code></li><li>在 <strong>Services</strong> &gt; <strong>OpenClash</strong> 中即可找到</li></ol><h4 id="配置-1" tabindex="-1">配置 <a class="header-anchor" href="#配置-1" aria-label="Permalink to &quot;配置&quot;">​</a></h4><ol><li>下载clash内核 <ol><li><strong>OpenClash</strong> &gt; <strong>Plugin Setting</strong> &gt; <strong>Version Update</strong></li><li>找到如图位置，点击即可下载最新版clash内核 <div><img src="/post/openwrt/openclash_download.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol></li><li>添加clash订阅 <ol><li><strong>OpenClash</strong> &gt; <strong>Config Subscribe</strong> &gt; <strong>ADD</strong><div><img src="/post/openwrt/openclash_subscribe_add.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>在<code>Subscribe Address</code>中填写自己的clash订阅地址并点击<code>COMMIT SETTING</code>保存</li></ol></li><li>点击OpenClash首页左下角“ENABLE OPENCLASH”即可启动</li><li>点击中间的“OPEN PANEL”可以访问clash前端UI面板 <div><img src="/post/openwrt/openclash_enable.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h3 id="cloudreve" tabindex="-1"><a href="https://docs.cloudreve.org/" target="_blank" rel="noreferrer">Cloudreve</a> <a class="header-anchor" href="#cloudreve" aria-label="Permalink to &quot;[Cloudreve](https://docs.cloudreve.org/)&quot;">​</a></h3><blockquote><p>开源的私有云系统，提供类似谷歌云一样的易用界面，支持文件下载、上传、分享等，同时也支持aria2离线下载</p></blockquote><h4 id="安装-3" tabindex="-1">安装 <a class="header-anchor" href="#安装-3" aria-label="Permalink to &quot;安装&quot;">​</a></h4><ol><li>使用terminal登录openwrt后台，比如 <code>ssh root@192.168.1.1</code></li><li>在GitHub的<a href="https://github.com/cloudreve/Cloudreve/releases" target="_blank" rel="noreferrer">release</a>页面找到最新的安装包，使用如下命令进行下载并保存<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/cloudreve/Cloudreve/releases/download/3.7.1/cloudreve_3.7.1_linux_arm64.tar.gz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-O</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cloudreve_3.7.1_linux_arm64.tar.gz</span></span></code></pre></div></li><li>解压到<code>/opt/cloudreve</code>目录下: <code>tar -zxvf cloudreve_3.7.1_linux_arm64.tar.gz -C /opt/cloudreve</code></li><li>赋予执行权限: <code>chmod +x ./cloudreve</code></li><li>启动cloudreve: <code>./cloudreve</code>，命令行日志中可看到初始的管理员密码，<strong>请务必保存！！！</strong></li></ol><h5 id="开机自启动" tabindex="-1">开机自启动 <a class="header-anchor" href="#开机自启动" aria-label="Permalink to &quot;开机自启动&quot;">​</a></h5><ol><li>新增cloudreve启动文件: <code>vim /etc/init.d/cloudreve</code></li><li>填写如下的内容:<div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/sh /etc/rc.common</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">START</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">99</span></span>
<span class="line"><span style="color:#A6ACCD;">STOP</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">01</span></span>
<span class="line"><span style="color:#A6ACCD;">USE_PROCD</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 应用名称 </span></span>
<span class="line"><span style="color:#A6ACCD;">NAME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">cloudreve</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 应用路径</span></span>
<span class="line"><span style="color:#A6ACCD;">PROG</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/opt/cloudreve/cloudreve</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">start_service</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_open_instance</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_set_param</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$PROG</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 输出日志到系统log中</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_set_param</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_set_param</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stderr</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">procd_close_instance</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li><li>启用服务: <code>/etc/init.d/cloudreve enable</code></li></ol><h4 id="配置离线下载" tabindex="-1">配置离线下载 <a class="header-anchor" href="#配置离线下载" aria-label="Permalink to &quot;配置离线下载&quot;">​</a></h4><ol><li>浏览器访问<code>192.168.1.1:5212</code>，使用admin账号登录 <div><img src="/post/openwrt/cloudreve_login.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>登录后点右上角<strong>头像</strong> &gt; <strong>管理面板</strong> &gt; <strong>离线下载节点</strong>，修改主节点</li><li>在离线下载部分填写Aria2对应的信息，保存后即可使用离线下载功能 <div><img src="/post/openwrt/cloudreve_aria2.png" alt="" style="max-height:400px;" loading="lazy"></div></li></ol><h3 id="网易uu加速器" tabindex="-1">网易UU加速器 <a class="header-anchor" href="#网易uu加速器" aria-label="Permalink to &quot;网易UU加速器&quot;">​</a></h3><h4 id="安装清单-3" tabindex="-1">安装清单 <a class="header-anchor" href="#安装清单-3" aria-label="Permalink to &quot;安装清单&quot;">​</a></h4><ul><li><code>uugamebooster</code>：网易uu加速器</li><li><code>luci-app-uugamebooster</code>：对应的luci界面</li></ul><h4 id="启用-1" tabindex="-1">启用 <a class="header-anchor" href="#启用-1" aria-label="Permalink to &quot;启用&quot;">​</a></h4><ol><li>勾选「enable」，保存并应用 <div><img src="/post/openwrt/uugamebooster.png" alt="" style="max-height:400px;" loading="lazy"></div></li><li>然后使用手机APP即可进行加速</li></ol><p>其他加速器如：灵缇加速器、迅游加速器等等，步骤都是类似的</p><h2 id="参考文章" tabindex="-1">参考文章 <a class="header-anchor" href="#参考文章" aria-label="Permalink to &quot;参考文章&quot;">​</a></h2><ul><li><a href="https://opclash.com/luyou/16.html" target="_blank" rel="noreferrer">彧繎博客</a></li><li><a href="https://github.com/vernesong/OpenClash/wiki" target="_blank" rel="noreferrer">OpenClash-使用手册</a></li><li><a href="https://sspai.com/post/67037" target="_blank" rel="noreferrer">嘿 Siri，唤醒电脑</a></li></ul></div></div><hr class="q-separator q-separator--horizontal" style="" aria-orientation="horizontal"><div class="q-card__actions justify-start q-card__actions--horiz row"><a class="q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--rectangle text-blue-6 q-btn--actionable q-focusable q-hoverable" style="" tabindex="0" href="https://qr.alipay.com/fkx12630qiigpvf7yb0nd85"><span class="q-focus-helper"></span><span class="q-btn__content text-center col items-center q-anchor--skip justify-center row"><div>请我喝杯咖啡</div><span class="q-icon on-right" style="font-size:2em;" aria-hidden="true" role="presentation"><svg viewBox="0 0 16 16"><path style="" d="M2.541 0H13.5a2.551 2.551 0 0 1 2.54 2.563v8.297c-.006 0-.531-.046-2.978-.813-.412-.14-.916-.327-1.479-.536-.303-.113-.624-.232-.957-.353a12.98 12.98 0 0 0 1.325-3.373H8.822V4.649h3.831v-.634h-3.83V2.121H7.26c-.274 0-.274.273-.274.273v1.621H3.11v.634h3.875v1.136h-3.2v.634H9.99c-.227.789-.532 1.53-.894 2.202-2.013-.67-4.161-1.212-5.51-.878-.864.214-1.42.597-1.746.998-1.499 1.84-.424 4.633 2.741 4.633 1.872 0 3.675-1.053 5.072-2.787 2.08 1.008 6.37 2.738 6.387 2.745v.105A2.551 2.551 0 0 1 13.5 16H2.541A2.552 2.552 0 0 1 0 13.437V2.563A2.552 2.552 0 0 1 2.541 0ZM2.309 9.27c-1.22 1.073-.49 3.034 1.978 3.034 1.434 0 2.868-.925 3.994-2.406-1.602-.789-2.959-1.353-4.425-1.207-.397.04-1.14.217-1.547.58Z"></path></svg></span></span></a><div class="q-space"></div><a class="q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--rectangle text-teal q-btn--actionable q-focusable q-hoverable" style="" tabindex="0" href="https://github.com/YangQuan666/yangquan666.github.io/discussions"><span class="q-focus-helper"></span><span class="q-btn__content text-center col items-center q-anchor--skip justify-center row"><i class="q-icon on-left notranslate material-icons" style="font-size:2em;" aria-hidden="true" role="presentation">question_answer</i><div>给我留言</div></span></a></div></div></div><div class="q-drawer-container"><div class="q-drawer__opener fixed-right" aria-hidden="true"></div><div class="fullscreen q-drawer__backdrop hidden" style="background-color:rgba(0,0,0,0);" aria-hidden="true"></div><aside class="q-drawer q-drawer--right q-drawer--bordered q-layout--prevent-focus fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding" style="width:300px;transform:translateX(300px);"><div class="q-drawer__content fit scroll"><div class="q-scrollarea fit"><div class="q-scrollarea__container scroll relative-position fit hide-scrollbar"><div class="q-scrollarea__content absolute" style=""><!----><div class="q-list q-list--padding"><div class="q-item q-item-type row no-wrap" style="" role="listitem"><div class="q-item__section column q-item__section--main justify-center text-h5"> 目录 </div></div><!--[--><!--]--></div></div><!----></div><!----><div class="q-scrollarea__bar q-scrollarea__bar--v absolute-right q-scrollarea__bar--invisible" style="" aria-hidden="true"></div><div class="q-scrollarea__bar q-scrollarea__bar--h absolute-bottom q-scrollarea__bar--invisible" style="" aria-hidden="true"></div><div class="q-scrollarea__thumb q-scrollarea__thumb--v absolute-right q-scrollarea__thumb--invisible" style="top:0px;height:0px;" aria-hidden="true"></div><div class="q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom q-scrollarea__thumb--invisible" style="left:0px;width:0px;" aria-hidden="true"></div></div></div></aside></div><!--]--></main></div><footer class="q-footer q-layout__section--marginal absolute-bottom q-footer--bordered bg-dark text-white" style=""><!----><div class="q-toolbar row no-wrap items-center" role="toolbar">Released under the GPL License. <div class="q-space"></div><a class="q-btn q-btn-item non-selectable no-outline q-btn--flat q-btn--rectangle q-btn--actionable q-focusable q-hoverable" style="" tabindex="0" href="https://github.com/YangQuan666/yangquan666.github.io/blob/main/CHANGELOG.md"><span class="q-focus-helper"></span><span class="q-btn__content text-center col items-center q-anchor--skip justify-center row"><span class="block">Release Note</span></span></a><div class="q-badge flex inline items-center no-wrap q-badge--single-line bg-primary" style="" role="status">0.1.0</div></div></footer></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"post_usb.md\":\"413d644a\",\"post_apple.md\":\"7d56ccbe\",\"post_xbox.md\":\"5bfe1dda\",\"post_message-queue.md\":\"fe778d70\",\"post_shuangpin.md\":\"c165b3f2\",\"post_rpc.md\":\"0865459f\",\"post_openwrt.md\":\"ff648a56\",\"post_android.md\":\"543d1abf\",\"post_hik-resume.md\":\"a89aac61\",\"post_about.md\":\"e3610c74\",\"post_cat.md\":\"5182f65e\",\"index.md\":\"95688241\",\"post_infosec.md\":\"ac44c090\",\"game_2048.md\":\"67f68576\",\"post_computer.md\":\"20a07fcc\",\"post_desk-setup.md\":\"0a7b3a72\",\"post_great-firewall.md\":\"8694d773\",\"post_keyword-check.md\":\"131d0704\",\"post_java-stream.md\":\"b5f70726\",\"post_piano.md\":\"a6eb07f1\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"萨科的魔术盒\",\"description\":\"YangQuan的个人博客网站\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"author\":\"Yang Quan\",\"signature\":\"一个爱折腾的程序员 )=￣ω￣=)\",\"outline\":[2,6],\"nav\":[{\"title\":\"主页\",\"icon\":\"home\",\"link\":\"/\"},{\"title\":\"小游戏\",\"icon\":\"smart_toy\",\"children\":[{\"title\":\"2048\",\"link\":\"/game/2048\",\"icon\":\"casino\"}]}],\"socialLinks\":[{\"icon\":\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z|0 0 16 16\",\"link\":\"https://github.com/YangQuan666\"},{\"icon\":\"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z|0 0 16 16\",\"link\":\"https://discord.gg/J8BVvnsWeB\"}],\"sponsor\":{\"icon\":\"M2.541 0H13.5a2.551 2.551 0 0 1 2.54 2.563v8.297c-.006 0-.531-.046-2.978-.813-.412-.14-.916-.327-1.479-.536-.303-.113-.624-.232-.957-.353a12.98 12.98 0 0 0 1.325-3.373H8.822V4.649h3.831v-.634h-3.83V2.121H7.26c-.274 0-.274.273-.274.273v1.621H3.11v.634h3.875v1.136h-3.2v.634H9.99c-.227.789-.532 1.53-.894 2.202-2.013-.67-4.161-1.212-5.51-.878-.864.214-1.42.597-1.746.998-1.499 1.84-.424 4.633 2.741 4.633 1.872 0 3.675-1.053 5.072-2.787 2.08 1.008 6.37 2.738 6.387 2.745v.105A2.551 2.551 0 0 1 13.5 16H2.541A2.552 2.552 0 0 1 0 13.437V2.563A2.552 2.552 0 0 1 2.541 0ZM2.309 9.27c-1.22 1.073-.49 3.034 1.978 3.034 1.434 0 2.868-.925 3.994-2.406-1.602-.789-2.959-1.353-4.425-1.207-.397.04-1.14.217-1.547.58Z|0 0 16 16\",\"link\":\"https://qr.alipay.com/fkx12630qiigpvf7yb0nd85\"},\"comment\":{\"icon\":\"question_answer\",\"link\":\"https://github.com/YangQuan666/yangquan666.github.io/discussions\"},\"footer\":{\"message\":\"Released under the GPL License.\",\"releaseNote\":\"https://github.com/YangQuan666/yangquan666.github.io/blob/main/CHANGELOG.md\",\"version\":\"0.1.0\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}")</script>
    
  </body>
</html>